{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drrod\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\ifunny-clone\\\\client\\\\src\\\\components\\\\CommentSection.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FiSend } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentContainer = styled.div`\n  padding: 16px;\n  border-top: 1px solid #f0f0f0;\n`;\n_c = CommentContainer;\nconst CommentList = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  margin-bottom: 16px;\n`;\n_c2 = CommentList;\nconst CommentItem = styled.div`\n  display: flex;\n  margin-bottom: 12px;\n`;\n_c3 = CommentItem;\nconst CommentAvatar = styled.img`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  margin-right: 12px;\n  object-fit: cover;\n`;\n_c4 = CommentAvatar;\nconst CommentContent = styled.div`\n  flex: 1;\n`;\n_c5 = CommentContent;\nconst CommentUser = styled.div`\n  font-weight: 600;\n  font-size: 0.9rem;\n`;\n_c6 = CommentUser;\nconst CommentText = styled.p`\n  margin: 4px 0 0;\n  font-size: 0.9rem;\n`;\n_c7 = CommentText;\nconst CommentForm = styled.form`\n  display: flex;\n  align-items: center;\n  margin-top: 16px;\n`;\n_c8 = CommentForm;\nconst CommentInput = styled.input`\n  flex: 1;\n  padding: 10px 12px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  font-size: 0.9rem;\n  outline: none;\n\n  &:focus {\n    border-color: #ff4500;\n  }\n`;\n_c9 = CommentInput;\nconst SubmitButton = styled.button`\n  background: #ff4500;\n  color: white;\n  border: none;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  margin-left: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n`;\n_c10 = SubmitButton;\nconst CommentSection = ({\n  memeId,\n  onCommentSubmit\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [comments, setComments] = useState([]);\n  const [commentText, setCommentText] = useState('');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const response = await api.get(`/memes/${memeId}/comments`);\n        setComments(response.data.comments);\n      } catch (error) {\n        console.error('Erro ao buscar comentários:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchComments();\n  }, [memeId]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!commentText.trim()) return;\n    try {\n      await onCommentSubmit(commentText);\n      setCommentText('');\n      // Atualiza a lista de comentários após adicionar novo\n      const response = await api.get(`/memes/${memeId}/comments`);\n      setComments(response.data.comments);\n    } catch (error) {\n      console.error('Erro ao enviar comentário:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CommentContainer, {\n    children: [/*#__PURE__*/_jsxDEV(CommentList, {\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Carregando coment\\xE1rios...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this) : comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Nenhum coment\\xE1rio ainda. Seja o primeiro!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this) : comments.map(comment => {\n        var _comment$user$profile;\n        return /*#__PURE__*/_jsxDEV(CommentItem, {\n          children: [/*#__PURE__*/_jsxDEV(CommentAvatar, {\n            src: ((_comment$user$profile = comment.user.profile) === null || _comment$user$profile === void 0 ? void 0 : _comment$user$profile.avatar) || 'https://i.pravatar.cc/150?img=3',\n            alt: comment.user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CommentContent, {\n            children: [/*#__PURE__*/_jsxDEV(CommentUser, {\n              children: [\"@\", comment.user.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CommentText, {\n              children: comment.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, comment._id || comment.createdAt, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), user && /*#__PURE__*/_jsxDEV(CommentForm, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(CommentInput, {\n        type: \"text\",\n        value: commentText,\n        onChange: e => setCommentText(e.target.value),\n        placeholder: \"Adicione um coment\\xE1rio...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        type: \"submit\",\n        children: /*#__PURE__*/_jsxDEV(FiSend, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentSection, \"kyZ8uEwhJHj49QFct0PQ9XmzoXE=\", false, function () {\n  return [useAuth];\n});\n_c11 = CommentSection;\nexport default CommentSection;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n$RefreshReg$(_c, \"CommentContainer\");\n$RefreshReg$(_c2, \"CommentList\");\n$RefreshReg$(_c3, \"CommentItem\");\n$RefreshReg$(_c4, \"CommentAvatar\");\n$RefreshReg$(_c5, \"CommentContent\");\n$RefreshReg$(_c6, \"CommentUser\");\n$RefreshReg$(_c7, \"CommentText\");\n$RefreshReg$(_c8, \"CommentForm\");\n$RefreshReg$(_c9, \"CommentInput\");\n$RefreshReg$(_c10, \"SubmitButton\");\n$RefreshReg$(_c11, \"CommentSection\");","map":{"version":3,"names":["React","useState","useEffect","styled","api","useAuth","FiSend","jsxDEV","_jsxDEV","CommentContainer","div","_c","CommentList","_c2","CommentItem","_c3","CommentAvatar","img","_c4","CommentContent","_c5","CommentUser","_c6","CommentText","p","_c7","CommentForm","form","_c8","CommentInput","input","_c9","SubmitButton","button","_c10","CommentSection","memeId","onCommentSubmit","_s","user","comments","setComments","commentText","setCommentText","loading","setLoading","fetchComments","response","get","data","error","console","handleSubmit","e","preventDefault","trim","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","comment","_comment$user$profile","src","profile","avatar","alt","username","text","_id","createdAt","onSubmit","type","value","onChange","target","placeholder","size","_c11","$RefreshReg$"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/ifunny-clone/client/src/components/CommentSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport api from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FiSend } from 'react-icons/fi';\r\n\r\nconst CommentContainer = styled.div`\r\n  padding: 16px;\r\n  border-top: 1px solid #f0f0f0;\r\n`;\r\n\r\nconst CommentList = styled.div`\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst CommentItem = styled.div`\r\n  display: flex;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst CommentAvatar = styled.img`\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst CommentContent = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst CommentUser = styled.div`\r\n  font-weight: 600;\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst CommentText = styled.p`\r\n  margin: 4px 0 0;\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst CommentForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 16px;\r\n`;\r\n\r\nconst CommentInput = styled.input`\r\n  flex: 1;\r\n  padding: 10px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  outline: none;\r\n\r\n  &:focus {\r\n    border-color: #ff4500;\r\n  }\r\n`;\r\n\r\nconst SubmitButton = styled.button`\r\n  background: #ff4500;\r\n  color: white;\r\n  border: none;\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  margin-left: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst CommentSection = ({ memeId, onCommentSubmit }) => {\r\n  const { user } = useAuth();\r\n  const [comments, setComments] = useState([]);\r\n  const [commentText, setCommentText] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      try {\r\n        const response = await api.get(`/memes/${memeId}/comments`);\r\n        setComments(response.data.comments);\r\n      } catch (error) {\r\n        console.error('Erro ao buscar comentários:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [memeId]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!commentText.trim()) return;\r\n\r\n    try {\r\n      await onCommentSubmit(commentText);\r\n      setCommentText('');\r\n      // Atualiza a lista de comentários após adicionar novo\r\n      const response = await api.get(`/memes/${memeId}/comments`);\r\n      setComments(response.data.comments);\r\n    } catch (error) {\r\n      console.error('Erro ao enviar comentário:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <CommentContainer>\r\n      <CommentList>\r\n        {loading ? (\r\n          <div>Carregando comentários...</div>\r\n        ) : comments.length === 0 ? (\r\n          <div>Nenhum comentário ainda. Seja o primeiro!</div>\r\n        ) : (\r\n          comments.map(comment => (\r\n            <CommentItem key={comment._id || comment.createdAt}>\r\n              <CommentAvatar \r\n                src={comment.user.profile?.avatar || 'https://i.pravatar.cc/150?img=3'} \r\n                alt={comment.user.username}\r\n              />\r\n              <CommentContent>\r\n                <CommentUser>@{comment.user.username}</CommentUser>\r\n                <CommentText>{comment.text}</CommentText>\r\n              </CommentContent>\r\n            </CommentItem>\r\n          ))\r\n        )}\r\n      </CommentList>\r\n\r\n      {user && (\r\n        <CommentForm onSubmit={handleSubmit}>\r\n          <CommentInput\r\n            type=\"text\"\r\n            value={commentText}\r\n            onChange={(e) => setCommentText(e.target.value)}\r\n            placeholder=\"Adicione um comentário...\"\r\n          />\r\n          <SubmitButton type=\"submit\">\r\n            <FiSend size={18} />\r\n          </SubmitButton>\r\n        </CommentForm>\r\n      )}\r\n    </CommentContainer>\r\n  );\r\n};\r\n\r\nexport default CommentSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}