{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import styled from'styled-components';import{useAuth}from'../contexts/AuthContext';import{Helmet}from'react-helmet';import api from'../services/api';import{FiArrowLeft}from'react-icons/fi';import MemeCard from'../components/MemeCard';import{toast}from'react-toastify';import{buildUrl}from'../utils/utils';import LoadingSpinner from'../components/LoadingSpinner';import ErrorMessage from'../components/ErrorMessage';// Estilos simplificados\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MemeDetailContainer=styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  background: var(--background);\n  color: var(--text);\n`;const Header=styled.header`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  position: sticky;\n  top: 0;\n  background: var(--background);\n  z-index: 10;\n  padding-top: 10px;\n`;const BackButton=styled.button`\n  background: none;\n  border: none;\n  color: var(--primary);\n  cursor: pointer;\n  margin-right: 15px;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  padding: 8px;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: rgba(255, 69, 0, 0.1);\n  }\n`;const MemeDetailPage=()=>{var _meme$author,_meme$author2;const{id}=useParams();const navigate=useNavigate();const{user}=useAuth();const[meme,setMeme]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showDeleteConfirm,setShowDeleteConfirm]=useState(false);const[isDeleting,setIsDeleting]=useState(false);const fetchMeme=useCallback(async()=>{try{setLoading(true);const response=await api.get(`/memes/${id}`);setMeme(response.data);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error('Erro ao carregar meme:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Meme não encontrado');toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Erro ao carregar meme');}finally{setLoading(false);}},[id]);const handleDelete=useCallback(async()=>{try{setIsDeleting(true);await api.delete(`/memes/${id}`);toast.success('Meme deletado com sucesso!');navigate('/');}catch(err){var _err$response3,_err$response3$data;console.error('Erro ao deletar meme:',err);toast.error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Erro ao deletar meme');}finally{setIsDeleting(false);setShowDeleteConfirm(false);}},[id,navigate]);useEffect(()=>{fetchMeme();},[fetchMeme]);if(loading){return/*#__PURE__*/_jsx(MemeDetailContainer,{children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(MemeDetailContainer,{children:/*#__PURE__*/_jsx(ErrorMessage,{message:error,onRetry:fetchMeme})});}if(!meme){return/*#__PURE__*/_jsx(MemeDetailContainer,{children:/*#__PURE__*/_jsx(ErrorMessage,{message:\"Meme n\\xE3o encontrado\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[meme.caption?`${meme.caption.substring(0,60)}...`:'Visualizar Meme',\" | iFunny Clone\"]}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:`Meme postado por @${(_meme$author=meme.author)===null||_meme$author===void 0?void 0:_meme$author.username}`}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:title\",content:meme.caption||'Meme interessante'}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:description\",content:`Meme postado por @${(_meme$author2=meme.author)===null||_meme$author2===void 0?void 0:_meme$author2.username}`}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:image\",content:buildUrl(meme.mediaUrl)}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:url\",content:`${window.location.origin}/memes/${meme._id}`})]}),/*#__PURE__*/_jsxs(MemeDetailContainer,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(BackButton,{onClick:()=>navigate(-1),\"aria-label\":\"Voltar\",children:/*#__PURE__*/_jsx(FiArrowLeft,{})})}),/*#__PURE__*/_jsx(MemeCard,{meme:meme,onDelete:handleDelete,showCommentsInitially:true})]})]});};export default MemeDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","styled","useAuth","Helmet","api","FiArrowLeft","MemeCard","toast","buildUrl","LoadingSpinner","ErrorMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MemeDetailContainer","div","Header","header","BackButton","button","MemeDetailPage","_meme$author","_meme$author2","id","navigate","user","meme","setMeme","loading","setLoading","error","setError","showDeleteConfirm","setShowDeleteConfirm","isDeleting","setIsDeleting","fetchMeme","response","get","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","message","handleDelete","delete","success","_err$response3","_err$response3$data","children","onRetry","caption","substring","name","content","author","username","property","mediaUrl","window","location","origin","_id","onClick","onDelete","showCommentsInitially"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/jokersta_apk/src/pages/MemeDetailPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Helmet } from 'react-helmet';\r\nimport api from '../services/api';\r\nimport { FiArrowLeft } from 'react-icons/fi';\r\nimport MemeCard from '../components/MemeCard';\r\nimport { toast } from 'react-toastify';\r\nimport { buildUrl } from '../utils/utils';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport ErrorMessage from '../components/ErrorMessage';\r\n\r\n// Estilos simplificados\r\nconst MemeDetailContainer = styled.div`\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background: var(--background);\r\n  color: var(--text);\r\n`;\r\n\r\nconst Header = styled.header`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 10px;\r\n  position: sticky;\r\n  top: 0;\r\n  background: var(--background);\r\n  z-index: 10;\r\n  padding-top: 10px;\r\n`;\r\n\r\nconst BackButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: var(--primary);\r\n  cursor: pointer;\r\n  margin-right: 15px;\r\n  font-size: 1.2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px;\r\n  border-radius: 50%;\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background-color: rgba(255, 69, 0, 0.1);\r\n  }\r\n`;\r\n\r\nconst MemeDetailPage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [meme, setMeme] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const fetchMeme = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get(`/memes/${id}`);\r\n      setMeme(response.data);\r\n    } catch (err) {\r\n      console.error('Erro ao carregar meme:', err);\r\n      setError(err.response?.data?.message || 'Meme não encontrado');\r\n      toast.error(err.response?.data?.message || 'Erro ao carregar meme');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id]);\r\n\r\n  const handleDelete = useCallback(async () => {\r\n    try {\r\n      setIsDeleting(true);\r\n      await api.delete(`/memes/${id}`);\r\n      toast.success('Meme deletado com sucesso!');\r\n      navigate('/');\r\n    } catch (err) {\r\n      console.error('Erro ao deletar meme:', err);\r\n      toast.error(err.response?.data?.message || 'Erro ao deletar meme');\r\n    } finally {\r\n      setIsDeleting(false);\r\n      setShowDeleteConfirm(false);\r\n    }\r\n  }, [id, navigate]);\r\n\r\n  useEffect(() => {\r\n    fetchMeme();\r\n  }, [fetchMeme]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <MemeDetailContainer>\r\n        <LoadingSpinner />\r\n      </MemeDetailContainer>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <MemeDetailContainer>\r\n        <ErrorMessage message={error} onRetry={fetchMeme} />\r\n      </MemeDetailContainer>\r\n    );\r\n  }\r\n\r\n  if (!meme) {\r\n    return (\r\n      <MemeDetailContainer>\r\n        <ErrorMessage message=\"Meme não encontrado\" />\r\n      </MemeDetailContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{meme.caption ? `${meme.caption.substring(0, 60)}...` : 'Visualizar Meme'} | iFunny Clone</title>\r\n        <meta name=\"description\" content={`Meme postado por @${meme.author?.username}`} />\r\n        <meta property=\"og:title\" content={meme.caption || 'Meme interessante'} />\r\n        <meta property=\"og:description\" content={`Meme postado por @${meme.author?.username}`} />\r\n        <meta property=\"og:image\" content={buildUrl(meme.mediaUrl)} />\r\n        <meta property=\"og:url\" content={`${window.location.origin}/memes/${meme._id}`} />\r\n      </Helmet>\r\n\r\n      <MemeDetailContainer>\r\n        <Header>\r\n          <BackButton onClick={() => navigate(-1)} aria-label=\"Voltar\">\r\n            <FiArrowLeft />\r\n          </BackButton>\r\n        </Header>\r\n\r\n        <MemeCard \r\n          meme={meme}\r\n          onDelete={handleDelete}\r\n          showCommentsInitially={true}\r\n        />\r\n      </MemeDetailContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MemeDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}