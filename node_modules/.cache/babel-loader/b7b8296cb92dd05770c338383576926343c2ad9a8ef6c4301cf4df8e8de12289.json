{"ast":null,"code":"import{useState,useEffect}from'react';import styled from'styled-components';import api from'../../services/api';import MemeThumbnail from'../MemeThumbnail';import{useAuth}from'../../contexts/AuthContext';import{FiHeart,FiLoader}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MemeGrid=styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 4px;\n  margin-top: 8px;\n\n  @media (min-width: 400px) {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  @media (min-width: 600px) {\n    grid-template-columns: repeat(5, 1fr);\n  }\n\n  @media (min-width: 900px) {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 6px;\n  }\n`;const MemeContainer=styled.div`\n  aspect-ratio: 1;\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(0.98);\n  }\n`;const EmptyMessage=styled.div`\n  grid-column: 1 / -1;\n  text-align: center;\n  padding: 30px 20px;\n  color: var(--text-light);\n  font-size: 0.9rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n`;const LoadingContainer=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: var(--text-light);\n  font-size: 0.9rem;\n`;const LoadMoreButton=styled.button`\n  grid-column: 1 / -1;\n  margin: 10px auto;\n  padding: 8px 16px;\n  background: var(--primary);\n  color: var(--text-inverse);\n  border: none;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: var(--primary-hover);\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n`;const UserLikes=_ref=>{let{userId}=_ref;const[memes,setMemes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const{user}=useAuth();const fetchLikedMemes=async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;try{setLoading(true);const{data}=await api.get(`/users/${userId}/liked-memes`,{params:{page:pageNum,limit:30}});const validMemes=data.memes.filter(meme=>!meme.isDeleted&&meme.author&&!meme.author.isDeleted);setMemes(prev=>pageNum===1?validMemes:[...prev,...validMemes]);setHasMore(data.hasMore);}catch(error){var _error$response,_error$response$data;console.error('Error fetching liked memes:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load memes');}finally{setLoading(false);}};useEffect(()=>{fetchLikedMemes();},[userId,user]);const handleLoadMore=()=>{const nextPage=page+1;setPage(nextPage);fetchLikedMemes(nextPage);};if(loading&&memes.length===0){return/*#__PURE__*/_jsx(EmptyMessage,{children:/*#__PURE__*/_jsxs(LoadingContainer,{children:[/*#__PURE__*/_jsx(FiLoader,{size:18,className:\"spin\"}),\"Loading...\"]})});}if(error){return/*#__PURE__*/_jsxs(EmptyMessage,{children:[/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsx(LoadMoreButton,{onClick:()=>fetchLikedMemes(),children:\"Try Again\"})]});}return/*#__PURE__*/_jsx(_Fragment,{children:memes.length===0?/*#__PURE__*/_jsxs(EmptyMessage,{children:[/*#__PURE__*/_jsx(FiHeart,{size:24}),userId===(user===null||user===void 0?void 0:user._id)?\"You haven't liked any memes yet\":\"No liked memes yet\"]}):/*#__PURE__*/_jsxs(MemeGrid,{children:[memes.map(meme=>/*#__PURE__*/_jsx(MemeContainer,{children:/*#__PURE__*/_jsx(MemeThumbnail,{meme:meme,compactMode:true,showDetailsOnHover:false})},meme._id)),hasMore&&/*#__PURE__*/_jsx(LoadMoreButton,{onClick:handleLoadMore,disabled:loading,children:loading?'Loading...':'Load More'})]})});};export default UserLikes;","map":{"version":3,"names":["useState","useEffect","styled","api","MemeThumbnail","useAuth","FiHeart","FiLoader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MemeGrid","div","MemeContainer","EmptyMessage","LoadingContainer","LoadMoreButton","button","UserLikes","_ref","userId","memes","setMemes","loading","setLoading","error","setError","page","setPage","hasMore","setHasMore","user","fetchLikedMemes","pageNum","arguments","length","undefined","data","get","params","limit","validMemes","filter","meme","isDeleted","author","prev","_error$response","_error$response$data","console","response","message","handleLoadMore","nextPage","children","size","className","onClick","_id","map","compactMode","showDetailsOnHover","disabled"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/jokersta_apk/src/components/profile/UserLikes.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport api from '../../services/api';\nimport MemeThumbnail from '../MemeThumbnail';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { FiHeart, FiLoader } from 'react-icons/fi';\n\nconst MemeGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 4px;\n  margin-top: 8px;\n\n  @media (min-width: 400px) {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  @media (min-width: 600px) {\n    grid-template-columns: repeat(5, 1fr);\n  }\n\n  @media (min-width: 900px) {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 6px;\n  }\n`;\n\nconst MemeContainer = styled.div`\n  aspect-ratio: 1;\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(0.98);\n  }\n`;\n\nconst EmptyMessage = styled.div`\n  grid-column: 1 / -1;\n  text-align: center;\n  padding: 30px 20px;\n  color: var(--text-light);\n  font-size: 0.9rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: var(--text-light);\n  font-size: 0.9rem;\n`;\n\nconst LoadMoreButton = styled.button`\n  grid-column: 1 / -1;\n  margin: 10px auto;\n  padding: 8px 16px;\n  background: var(--primary);\n  color: var(--text-inverse);\n  border: none;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: var(--primary-hover);\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n`;\n\nconst UserLikes = ({ userId }) => {\n  const [memes, setMemes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const { user } = useAuth();\n\n  const fetchLikedMemes = async (pageNum = 1) => {\n    try {\n      setLoading(true);\n      const { data } = await api.get(`/users/${userId}/liked-memes`, {\n        params: { page: pageNum, limit: 30 }\n      });\n      \n      const validMemes = data.memes.filter(meme => \n        !meme.isDeleted && meme.author && !meme.author.isDeleted\n      );\n\n      setMemes(prev => pageNum === 1 ? validMemes : [...prev, ...validMemes]);\n      setHasMore(data.hasMore);\n    } catch (error) {\n      console.error('Error fetching liked memes:', error);\n      setError(error.response?.data?.message || 'Failed to load memes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLikedMemes();\n  }, [userId, user]);\n\n  const handleLoadMore = () => {\n    const nextPage = page + 1;\n    setPage(nextPage);\n    fetchLikedMemes(nextPage);\n  };\n\n  if (loading && memes.length === 0) {\n    return (\n      <EmptyMessage>\n        <LoadingContainer>\n          <FiLoader size={18} className=\"spin\" />\n          Loading...\n        </LoadingContainer>\n      </EmptyMessage>\n    );\n  }\n\n  if (error) {\n    return (\n      <EmptyMessage>\n        <div>{error}</div>\n        <LoadMoreButton onClick={() => fetchLikedMemes()}>\n          Try Again\n        </LoadMoreButton>\n      </EmptyMessage>\n    );\n  }\n\n  return (\n    <>\n      {memes.length === 0 ? (\n        <EmptyMessage>\n          <FiHeart size={24} />\n          {userId === user?._id \n            ? \"You haven't liked any memes yet\" \n            : \"No liked memes yet\"}\n        </EmptyMessage>\n      ) : (\n        <MemeGrid>\n          {memes.map(meme => (\n            <MemeContainer key={meme._id}>\n              <MemeThumbnail \n                meme={meme}\n                compactMode={true}\n                showDetailsOnHover={false}\n              />\n            </MemeContainer>\n          ))}\n          \n          {hasMore && (\n            <LoadMoreButton \n              onClick={handleLoadMore}\n              disabled={loading}\n            >\n              {loading ? 'Loading...' : 'Load More'}\n            </LoadMoreButton>\n          )}\n        </MemeGrid>\n      )}\n    </>\n  );\n};\n\nexport default UserLikes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}