{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import api from'../../services/api';import{useParams}from'react-router-dom';import MemeThumbnail from'../MemeThumbnail';import{PulseLoader}from'react-spinners';import{FaSadTear,FaSmileWink}from'react-icons/fa';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 10px;\n`;const MemeGrid=styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 4px;\n\n  @media (min-width: 400px) {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  @media (min-width: 600px) {\n    grid-template-columns: repeat(5, 1fr);\n  }\n\n  @media (min-width: 900px) {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 6px;\n  }\n`;const MemeContainer=styled.div`\n  aspect-ratio: 1;\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(0.98);\n  }\n`;const StatusMessage=styled.div`\n  grid-column: 1 / -1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  text-align: center;\n  padding: 20px;\n  background: ${_ref=>{let{theme}=_ref;return theme.cardBg||'#f8f9fa';}};\n  border-radius: 8px;\n  color: ${_ref2=>{let{theme}=_ref2;return theme.text||'#333';}};\n\n  svg {\n    font-size: 2rem;\n    margin-bottom: 15px;\n    color: ${_ref3=>{let{theme}=_ref3;return theme.primary||'#6c5ce7';}};\n  }\n\n  h3 {\n    font-size: 1.2rem;\n    margin-bottom: 8px;\n  }\n\n  p {\n    font-size: 0.9rem;\n    opacity: 0.8;\n  }\n`;const LoadMoreButton=styled.button`\n  grid-column: 1 / -1;\n  margin: 10px auto;\n  padding: 8px 16px;\n  background: ${_ref4=>{let{theme}=_ref4;return theme.primary||'#6c5ce7';}};\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${_ref5=>{let{theme}=_ref5;return theme.primaryHover||'#5649c0';}};\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;const UserMemes=()=>{const{userId}=useParams();const{user:currentUser}=useAuth();const[memes,setMemes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const fetchUserMemes=async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;try{setLoading(true);setError(null);const{data}=await api.get(`/users/${userId}/memes`,{params:{page:pageNum,limit:30}});const validMemes=data.memes.filter(meme=>{const isNotDeleted=!meme.isDeleted;const hasValidAuthor=meme.author&&!meme.author.isDeleted;return isNotDeleted&&hasValidAuthor;});setMemes(prev=>pageNum===1?validMemes:[...prev,...validMemes]);setHasMore(data.hasMore);}catch(err){setError('Falha ao carregar memes');console.error('Erro ao buscar memes:',err);}finally{setLoading(false);}};useEffect(()=>{fetchUserMemes();},[userId]);const handleLoadMore=()=>{const nextPage=page+1;setPage(nextPage);fetchUserMemes(nextPage);};const handleMemeDeleted=deletedMemeId=>{setMemes(prev=>prev.filter(m=>m._id!==deletedMemeId));};if(loading&&memes.length===0){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(StatusMessage,{children:[/*#__PURE__*/_jsx(PulseLoader,{color:\"#6c5ce7\",size:10}),/*#__PURE__*/_jsx(\"h3\",{children:\"Carregando memes...\"})]})});}if(error){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(StatusMessage,{children:[/*#__PURE__*/_jsx(FaSadTear,{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Oops! Algo deu errado\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(LoadMoreButton,{onClick:()=>fetchUserMemes(),children:\"Tentar novamente\"})]})});}if(memes.length===0){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(StatusMessage,{children:[/*#__PURE__*/_jsx(FaSmileWink,{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Nenhum meme encontrado\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Parece que este usu\\xE1rio ainda n\\xE3o criou memes\"})]})});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(MemeGrid,{children:[memes.map(meme=>{var _meme$author;return/*#__PURE__*/_jsx(MemeContainer,{children:/*#__PURE__*/_jsx(MemeThumbnail,{meme:meme,compactMode:true,showDetailsOnHover:false,onDelete:(currentUser===null||currentUser===void 0?void 0:currentUser._id)===((_meme$author=meme.author)===null||_meme$author===void 0?void 0:_meme$author._id)?handleMemeDeleted:null})},meme._id);}),hasMore&&/*#__PURE__*/_jsx(LoadMoreButton,{onClick:handleLoadMore,disabled:loading,children:loading?'Carregando...':'Ver mais'})]})});};export default UserMemes;","map":{"version":3,"names":["React","useState","useEffect","styled","api","useParams","MemeThumbnail","PulseLoader","FaSadTear","FaSmileWink","useAuth","jsx","_jsx","jsxs","_jsxs","Container","div","MemeGrid","MemeContainer","StatusMessage","_ref","theme","cardBg","_ref2","text","_ref3","primary","LoadMoreButton","button","_ref4","_ref5","primaryHover","UserMemes","userId","user","currentUser","memes","setMemes","loading","setLoading","error","setError","page","setPage","hasMore","setHasMore","fetchUserMemes","pageNum","arguments","length","undefined","data","get","params","limit","validMemes","filter","meme","isNotDeleted","isDeleted","hasValidAuthor","author","prev","err","console","handleLoadMore","nextPage","handleMemeDeleted","deletedMemeId","m","_id","children","color","size","onClick","map","_meme$author","compactMode","showDetailsOnHover","onDelete","disabled"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/jokersta_apk/src/components/profile/UserMemes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport api from '../../services/api';\nimport { useParams } from 'react-router-dom';\nimport MemeThumbnail from '../MemeThumbnail';\nimport { PulseLoader } from 'react-spinners';\nimport { FaSadTear, FaSmileWink } from 'react-icons/fa';\nimport { useAuth } from '../../contexts/AuthContext';\n\nconst Container = styled.div`\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 10px;\n`;\n\nconst MemeGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 4px;\n\n  @media (min-width: 400px) {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  @media (min-width: 600px) {\n    grid-template-columns: repeat(5, 1fr);\n  }\n\n  @media (min-width: 900px) {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 6px;\n  }\n`;\n\nconst MemeContainer = styled.div`\n  aspect-ratio: 1;\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(0.98);\n  }\n`;\n\nconst StatusMessage = styled.div`\n  grid-column: 1 / -1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  text-align: center;\n  padding: 20px;\n  background: ${({ theme }) => theme.cardBg || '#f8f9fa'};\n  border-radius: 8px;\n  color: ${({ theme }) => theme.text || '#333'};\n\n  svg {\n    font-size: 2rem;\n    margin-bottom: 15px;\n    color: ${({ theme }) => theme.primary || '#6c5ce7'};\n  }\n\n  h3 {\n    font-size: 1.2rem;\n    margin-bottom: 8px;\n  }\n\n  p {\n    font-size: 0.9rem;\n    opacity: 0.8;\n  }\n`;\n\nconst LoadMoreButton = styled.button`\n  grid-column: 1 / -1;\n  margin: 10px auto;\n  padding: 8px 16px;\n  background: ${({ theme }) => theme.primary || '#6c5ce7'};\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${({ theme }) => theme.primaryHover || '#5649c0'};\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n`;\n\nconst UserMemes = () => {\n  const { userId } = useParams();\n  const { user: currentUser } = useAuth();\n  const [memes, setMemes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  const fetchUserMemes = async (pageNum = 1) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const { data } = await api.get(`/users/${userId}/memes`, {\n        params: { page: pageNum, limit: 30 }\n      });\n      \n      const validMemes = data.memes.filter(meme => {\n        const isNotDeleted = !meme.isDeleted;\n        const hasValidAuthor = meme.author && !meme.author.isDeleted;\n        return isNotDeleted && hasValidAuthor;\n      });\n\n      setMemes(prev => pageNum === 1 ? validMemes : [...prev, ...validMemes]);\n      setHasMore(data.hasMore);\n    } catch (err) {\n      setError('Falha ao carregar memes');\n      console.error('Erro ao buscar memes:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUserMemes();\n  }, [userId]);\n\n  const handleLoadMore = () => {\n    const nextPage = page + 1;\n    setPage(nextPage);\n    fetchUserMemes(nextPage);\n  };\n\n  const handleMemeDeleted = (deletedMemeId) => {\n    setMemes(prev => prev.filter(m => m._id !== deletedMemeId));\n  };\n\n  if (loading && memes.length === 0) {\n    return (\n      <Container>\n        <StatusMessage>\n          <PulseLoader color=\"#6c5ce7\" size={10} />\n          <h3>Carregando memes...</h3>\n        </StatusMessage>\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container>\n        <StatusMessage>\n          <FaSadTear />\n          <h3>Oops! Algo deu errado</h3>\n          <p>{error}</p>\n          <LoadMoreButton onClick={() => fetchUserMemes()}>\n            Tentar novamente\n          </LoadMoreButton>\n        </StatusMessage>\n      </Container>\n    );\n  }\n\n  if (memes.length === 0) {\n    return (\n      <Container>\n        <StatusMessage>\n          <FaSmileWink />\n          <h3>Nenhum meme encontrado</h3>\n          <p>Parece que este usuário ainda não criou memes</p>\n        </StatusMessage>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <MemeGrid>\n        {memes.map(meme => (\n          <MemeContainer key={meme._id}>\n            <MemeThumbnail \n              meme={meme}\n              compactMode={true}\n              showDetailsOnHover={false}\n              onDelete={currentUser?._id === meme.author?._id ? handleMemeDeleted : null}\n            />\n          </MemeContainer>\n        ))}\n        \n        {hasMore && (\n          <LoadMoreButton \n            onClick={handleLoadMore}\n            disabled={loading}\n          >\n            {loading ? 'Carregando...' : 'Ver mais'}\n          </LoadMoreButton>\n        )}\n      </MemeGrid>\n    </Container>\n  );\n};\n\nexport default UserMemes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}