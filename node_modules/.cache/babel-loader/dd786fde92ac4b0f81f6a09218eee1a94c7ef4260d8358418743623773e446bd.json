{"ast":null,"code":"import React,{createContext,useState,useEffect,useCallback}from'react';import{checkAuth,logout as apiLogout}from'../services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const verifyAuth=useCallback(async()=>{try{const{data}=await checkAuth();setUser(data.user);}catch(error){setUser(null);}finally{setLoading(false);}},[]);const logout=useCallback(async()=>{try{await apiLogout();setUser(null);}catch(error){console.error('Erro ao fazer logout:',error);}},[]);useEffect(()=>{verifyAuth();},[verifyAuth]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,setUser,loading,logout},children:children});};const User=require('../models/user.model');const Follow=require('../models/follow.model');exports.getProfile=async(req,res)=>{try{const user=await User.findById(req.params.userId).select('-passwordHash').populate('stats');if(!user)return res.status(404).json({message:'User not found'});res.status(200).json(user);}catch(error){res.status(500).json({message:'Error fetching profile',error:error.message});}};exports.updateProfile=async(req,res)=>{try{const updates=req.body;const userId=req.userId;const updatedUser=await User.findByIdAndUpdate(userId,{...updates,updatedAt:Date.now()},{new:true}).select('-passwordHash');res.status(200).json(updatedUser);}catch(error){res.status(500).json({message:'Error updating profile',error:error.message});}};// Adicione os métodos followUser, unfollowUser, getFollowers, getFollowing...","map":{"version":3,"names":["React","createContext","useState","useEffect","useCallback","checkAuth","logout","apiLogout","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","verifyAuth","data","error","console","Provider","value","User","require","Follow","exports","getProfile","req","res","findById","params","userId","select","populate","status","json","message","updateProfile","updates","body","updatedUser","findByIdAndUpdate","updatedAt","Date","now","new"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/ifunny-clone/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useCallback } from 'react';\nimport { checkAuth, logout as apiLogout } from '../services/auth';\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const verifyAuth = useCallback(async () => {\n    try {\n      const { data } = await checkAuth();\n      setUser(data.user);\n    } catch (error) {\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const logout = useCallback(async () => {\n    try {\n      await apiLogout();\n      setUser(null);\n    } catch (error) {\n      console.error('Erro ao fazer logout:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    verifyAuth();\n  }, [verifyAuth]);\n\n  return (\n    <AuthContext.Provider value={{ user, setUser, loading, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nconst User = require('../models/user.model');\nconst Follow = require('../models/follow.model');\n\nexports.getProfile = async (req, res) => {\n  try {\n    const user = await User.findById(req.params.userId)\n      .select('-passwordHash')\n      .populate('stats');\n      \n    if (!user) return res.status(404).json({ message: 'User not found' });\n    \n    res.status(200).json(user);\n  } catch (error) {\n    res.status(500).json({ message: 'Error fetching profile', error: error.message });\n  }\n};\n\nexports.updateProfile = async (req, res) => {\n  try {\n    const updates = req.body;\n    const userId = req.userId;\n    \n    const updatedUser = await User.findByIdAndUpdate(\n      userId,\n      { \n        ...updates,\n        updatedAt: Date.now() \n      },\n      { new: true }\n    ).select('-passwordHash');\n    \n    res.status(200).json(updatedUser);\n  } catch (error) {\n    res.status(500).json({ message: 'Error updating profile', error: error.message });\n  }\n};\n\n// Adicione os métodos followUser, unfollowUser, getFollowers, getFollowing..."],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}