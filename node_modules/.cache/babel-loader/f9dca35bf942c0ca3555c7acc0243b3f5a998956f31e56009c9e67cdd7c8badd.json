{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drrod\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\ifunny-clone\\\\client\\\\src\\\\pages\\\\ProfilePage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/ProfilePage.jsx\nimport { useState, useEffect } from 'react';\nimport { useParams, Navigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport ProfileHeader from '../components/profile/ProfileHeader';\nimport ProfileTabs from '../components/profile/ProfileTabs';\nimport UserMemes from '../components/profile/UserMemes';\nimport UserLikes from '../components/profile/UserLikes';\nimport UserActivity from '../components/profile/UserActivity';\nimport UserGuests from '../components/profile/UserGuests';\nimport ProfileSettings from '../components/profile/ProfileSettings';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n_c = ProfileContainer;\nconst ProfilePage = () => {\n  _s();\n  const {\n    userId\n  } = useParams();\n  const {\n    user: currentUser\n  } = useAuth();\n  const [profileData, setProfileData] = useState({\n    user: null,\n    stats: {\n      posts: 0,\n      followers: 0,\n      following: 0\n    },\n    isFollowing: false\n  });\n  const [activeTab, setActiveTab] = useState('memes');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchProfileData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Busca dados em paralelo\n        const [userRes, statsRes, followStatusRes] = await Promise.all([api.get(`/users/${userId}`), api.get(`/users/${userId}/stats`), currentUser ? api.get(`/users/${userId}/follow-status`) : Promise.resolve({\n          data: {\n            isFollowing: false\n          }\n        })]);\n        setProfileData({\n          user: userRes.data,\n          stats: statsRes.data.data,\n          isFollowing: followStatusRes.data.isFollowing\n        });\n      } catch (error) {\n        console.error('Error fetching profile data:', error);\n        setError(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfileData();\n  }, [userId, currentUser]);\n  const handleFollow = async () => {\n    try {\n      if (profileData.isFollowing) {\n        await api.delete(`/users/${userId}/unfollow`);\n      } else {\n        await api.post(`/users/${userId}/follow`);\n      }\n\n      // Atualiza o status e a contagem\n      const [statsRes, followStatusRes] = await Promise.all([api.get(`/users/${userId}/stats`), api.get(`/users/${userId}/follow-status`)]);\n      setProfileData(prev => ({\n        ...prev,\n        stats: statsRes.data.data,\n        isFollowing: followStatusRes.data.isFollowing\n      }));\n    } catch (error) {\n      console.error('Error updating follow status:', error);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: \"Error loading profile\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 21\n  }, this);\n  if (!profileData.user && !loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"User not found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 45\n  }, this);\n  return /*#__PURE__*/_jsxDEV(ProfileContainer, {\n    children: [/*#__PURE__*/_jsxDEV(ProfileHeader, {\n      user: profileData.user,\n      stats: profileData.stats,\n      isFollowing: profileData.isFollowing,\n      onFollowToggle: handleFollow,\n      isCurrentUser: (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) === userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProfileTabs, {\n      activeTab: activeTab,\n      setActiveTab: setActiveTab\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), activeTab === 'memes' && /*#__PURE__*/_jsxDEV(UserMemes, {\n      userId: userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }, this), activeTab === 'likes' && /*#__PURE__*/_jsxDEV(UserLikes, {\n      userId: userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }, this), activeTab === 'activity' && /*#__PURE__*/_jsxDEV(UserActivity, {\n      userId: userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 36\n    }, this), activeTab === 'followers' && /*#__PURE__*/_jsxDEV(UserFollowers, {\n      userId: userId,\n      followersCount: profileData.stats.followers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), activeTab === 'following' && /*#__PURE__*/_jsxDEV(UserFollowing, {\n      userId: userId,\n      followingCount: profileData.stats.following\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this), activeTab === 'settings' && /*#__PURE__*/_jsxDEV(ProfileSettings, {\n      user: profileData.user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 36\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfilePage, \"Ob2D59xCq0o+ArarZNG66lqpuGE=\", false, function () {\n  return [useParams, useAuth];\n});\n_c2 = ProfilePage;\nexport default ProfilePage;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProfileContainer\");\n$RefreshReg$(_c2, \"ProfilePage\");","map":{"version":3,"names":["useState","useEffect","useParams","Navigate","styled","api","useAuth","ProfileHeader","ProfileTabs","UserMemes","UserLikes","UserActivity","UserGuests","ProfileSettings","jsxDEV","_jsxDEV","ProfileContainer","div","_c","ProfilePage","_s","userId","user","currentUser","profileData","setProfileData","stats","posts","followers","following","isFollowing","activeTab","setActiveTab","loading","setLoading","error","setError","fetchProfileData","userRes","statsRes","followStatusRes","Promise","all","get","resolve","data","console","handleFollow","delete","post","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFollowToggle","isCurrentUser","_id","UserFollowers","followersCount","UserFollowing","followingCount","_c2","$RefreshReg$"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/ifunny-clone/client/src/pages/ProfilePage.jsx"],"sourcesContent":["// src/pages/ProfilePage.jsx\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams, Navigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport api from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport ProfileHeader from '../components/profile/ProfileHeader';\r\nimport ProfileTabs from '../components/profile/ProfileTabs';\r\nimport UserMemes from '../components/profile/UserMemes';\r\nimport UserLikes from '../components/profile/UserLikes';\r\nimport UserActivity from '../components/profile/UserActivity';\r\nimport UserGuests from '../components/profile/UserGuests';\r\nimport ProfileSettings from '../components/profile/ProfileSettings';\r\n\r\nconst ProfileContainer = styled.div`\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n`;\r\n\r\nconst ProfilePage = () => {\r\n  const { userId } = useParams();\r\n  const { user: currentUser } = useAuth();\r\n  const [profileData, setProfileData] = useState({\r\n    user: null,\r\n    stats: {\r\n      posts: 0,\r\n      followers: 0,\r\n      following: 0\r\n    },\r\n    isFollowing: false\r\n  });\r\n  const [activeTab, setActiveTab] = useState('memes');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProfileData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // Busca dados em paralelo\r\n        const [userRes, statsRes, followStatusRes] = await Promise.all([\r\n          api.get(`/users/${userId}`),\r\n          api.get(`/users/${userId}/stats`),\r\n          currentUser ? api.get(`/users/${userId}/follow-status`) : Promise.resolve({ data: { isFollowing: false } })\r\n        ]);\r\n\r\n        setProfileData({\r\n          user: userRes.data,\r\n          stats: statsRes.data.data,\r\n          isFollowing: followStatusRes.data.isFollowing\r\n        });\r\n        \r\n      } catch (error) {\r\n        console.error('Error fetching profile data:', error);\r\n        setError(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfileData();\r\n  }, [userId, currentUser]);\r\n\r\n  const handleFollow = async () => {\r\n    try {\r\n      if (profileData.isFollowing) {\r\n        await api.delete(`/users/${userId}/unfollow`);\r\n      } else {\r\n        await api.post(`/users/${userId}/follow`);\r\n      }\r\n      \r\n      // Atualiza o status e a contagem\r\n      const [statsRes, followStatusRes] = await Promise.all([\r\n        api.get(`/users/${userId}/stats`),\r\n        api.get(`/users/${userId}/follow-status`)\r\n      ]);\r\n\r\n      setProfileData(prev => ({\r\n        ...prev,\r\n        stats: statsRes.data.data,\r\n        isFollowing: followStatusRes.data.isFollowing\r\n      }));\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating follow status:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">Loading...</div>;\r\n  if (error) return <div className=\"error\">Error loading profile</div>;\r\n  if (!profileData.user && !loading) return <div>User not found</div>;\r\n\r\n  return (\r\n    <ProfileContainer>\r\n      <ProfileHeader \r\n        user={profileData.user} \r\n        stats={profileData.stats}\r\n        isFollowing={profileData.isFollowing}\r\n        onFollowToggle={handleFollow}\r\n        isCurrentUser={currentUser?._id === userId}\r\n      />\r\n      \r\n      <ProfileTabs activeTab={activeTab} setActiveTab={setActiveTab} />\r\n      \r\n      {activeTab === 'memes' && <UserMemes userId={userId} />}\r\n      {activeTab === 'likes' && <UserLikes userId={userId} />}\r\n      {activeTab === 'activity' && <UserActivity userId={userId} />}\r\n      {activeTab === 'followers' && (\r\n        <UserFollowers \r\n          userId={userId} \r\n          followersCount={profileData.stats.followers}\r\n        />\r\n      )}\r\n      {activeTab === 'following' && (\r\n        <UserFollowing \r\n          userId={userId} \r\n          followingCount={profileData.stats.following}\r\n        />\r\n      )}\r\n      {activeTab === 'settings' && <ProfileSettings user={profileData.user} />}\r\n    </ProfileContainer>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,SAAS,EAAEC,QAAQ,QAAQ,kBAAkB;AACtD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,aAAa,MAAM,qCAAqC;AAC/D,OAAOC,WAAW,MAAM,mCAAmC;AAC3D,OAAOC,SAAS,MAAM,iCAAiC;AACvD,OAAOC,SAAS,MAAM,iCAAiC;AACvD,OAAOC,YAAY,MAAM,oCAAoC;AAC7D,OAAOC,UAAU,MAAM,kCAAkC;AACzD,OAAOC,eAAe,MAAM,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpE,MAAMC,gBAAgB,GAAGZ,MAAM,CAACa,GAAG;AACnC;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAJIF,gBAAgB;AAMtB,MAAMG,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM;IAAEC;EAAO,CAAC,GAAGnB,SAAS,CAAC,CAAC;EAC9B,MAAM;IAAEoB,IAAI,EAAEC;EAAY,CAAC,GAAGjB,OAAO,CAAC,CAAC;EACvC,MAAM,CAACkB,WAAW,EAAEC,cAAc,CAAC,GAAGzB,QAAQ,CAAC;IAC7CsB,IAAI,EAAE,IAAI;IACVI,KAAK,EAAE;MACLC,KAAK,EAAE,CAAC;MACRC,SAAS,EAAE,CAAC;MACZC,SAAS,EAAE;IACb,CAAC;IACDC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CAAC,OAAO,CAAC;EACnD,MAAM,CAACiC,OAAO,EAAEC,UAAU,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACmC,KAAK,EAAEC,QAAQ,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMoC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI;QACFH,UAAU,CAAC,IAAI,CAAC;QAChBE,QAAQ,CAAC,IAAI,CAAC;;QAEd;QACA,MAAM,CAACE,OAAO,EAAEC,QAAQ,EAAEC,eAAe,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC7DrC,GAAG,CAACsC,GAAG,CAAC,UAAUtB,MAAM,EAAE,CAAC,EAC3BhB,GAAG,CAACsC,GAAG,CAAC,UAAUtB,MAAM,QAAQ,CAAC,EACjCE,WAAW,GAAGlB,GAAG,CAACsC,GAAG,CAAC,UAAUtB,MAAM,gBAAgB,CAAC,GAAGoB,OAAO,CAACG,OAAO,CAAC;UAAEC,IAAI,EAAE;YAAEf,WAAW,EAAE;UAAM;QAAE,CAAC,CAAC,CAC5G,CAAC;QAEFL,cAAc,CAAC;UACbH,IAAI,EAAEgB,OAAO,CAACO,IAAI;UAClBnB,KAAK,EAAEa,QAAQ,CAACM,IAAI,CAACA,IAAI;UACzBf,WAAW,EAAEU,eAAe,CAACK,IAAI,CAACf;QACpC,CAAC,CAAC;MAEJ,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdW,OAAO,CAACX,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpDC,QAAQ,CAACD,KAAK,CAAC;MACjB,CAAC,SAAS;QACRD,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDG,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAAChB,MAAM,EAAEE,WAAW,CAAC,CAAC;EAEzB,MAAMwB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,IAAIvB,WAAW,CAACM,WAAW,EAAE;QAC3B,MAAMzB,GAAG,CAAC2C,MAAM,CAAC,UAAU3B,MAAM,WAAW,CAAC;MAC/C,CAAC,MAAM;QACL,MAAMhB,GAAG,CAAC4C,IAAI,CAAC,UAAU5B,MAAM,SAAS,CAAC;MAC3C;;MAEA;MACA,MAAM,CAACkB,QAAQ,EAAEC,eAAe,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACpDrC,GAAG,CAACsC,GAAG,CAAC,UAAUtB,MAAM,QAAQ,CAAC,EACjChB,GAAG,CAACsC,GAAG,CAAC,UAAUtB,MAAM,gBAAgB,CAAC,CAC1C,CAAC;MAEFI,cAAc,CAACyB,IAAI,KAAK;QACtB,GAAGA,IAAI;QACPxB,KAAK,EAAEa,QAAQ,CAACM,IAAI,CAACA,IAAI;QACzBf,WAAW,EAAEU,eAAe,CAACK,IAAI,CAACf;MACpC,CAAC,CAAC,CAAC;IAEL,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACvD;EACF,CAAC;EAED,IAAIF,OAAO,EAAE,oBAAOlB,OAAA;IAAKoC,SAAS,EAAC,SAAS;IAAAC,QAAA,EAAC;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAC7D,IAAIrB,KAAK,EAAE,oBAAOpB,OAAA;IAAKoC,SAAS,EAAC,OAAO;IAAAC,QAAA,EAAC;EAAqB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACpE,IAAI,CAAChC,WAAW,CAACF,IAAI,IAAI,CAACW,OAAO,EAAE,oBAAOlB,OAAA;IAAAqC,QAAA,EAAK;EAAc;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAEnE,oBACEzC,OAAA,CAACC,gBAAgB;IAAAoC,QAAA,gBACfrC,OAAA,CAACR,aAAa;MACZe,IAAI,EAAEE,WAAW,CAACF,IAAK;MACvBI,KAAK,EAAEF,WAAW,CAACE,KAAM;MACzBI,WAAW,EAAEN,WAAW,CAACM,WAAY;MACrC2B,cAAc,EAAEV,YAAa;MAC7BW,aAAa,EAAE,CAAAnC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEoC,GAAG,MAAKtC;IAAO;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CAAC,eAEFzC,OAAA,CAACP,WAAW;MAACuB,SAAS,EAAEA,SAAU;MAACC,YAAY,EAAEA;IAAa;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAEhEzB,SAAS,KAAK,OAAO,iBAAIhB,OAAA,CAACN,SAAS;MAACY,MAAM,EAAEA;IAAO;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACtDzB,SAAS,KAAK,OAAO,iBAAIhB,OAAA,CAACL,SAAS;MAACW,MAAM,EAAEA;IAAO;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACtDzB,SAAS,KAAK,UAAU,iBAAIhB,OAAA,CAACJ,YAAY;MAACU,MAAM,EAAEA;IAAO;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAC5DzB,SAAS,KAAK,WAAW,iBACxBhB,OAAA,CAAC6C,aAAa;MACZvC,MAAM,EAAEA,MAAO;MACfwC,cAAc,EAAErC,WAAW,CAACE,KAAK,CAACE;IAAU;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C,CACF,EACAzB,SAAS,KAAK,WAAW,iBACxBhB,OAAA,CAAC+C,aAAa;MACZzC,MAAM,EAAEA,MAAO;MACf0C,cAAc,EAAEvC,WAAW,CAACE,KAAK,CAACG;IAAU;MAAAwB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C,CACF,EACAzB,SAAS,KAAK,UAAU,iBAAIhB,OAAA,CAACF,eAAe;MAACS,IAAI,EAAEE,WAAW,CAACF;IAAK;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACxD,CAAC;AAEvB,CAAC;AAACpC,EAAA,CAzGID,WAAW;EAAA,QACIjB,SAAS,EACEI,OAAO;AAAA;AAAA0D,GAAA,GAFjC7C,WAAW;AA2GjB,eAAeA,WAAW;AAAC,IAAAD,EAAA,EAAA8C,GAAA;AAAAC,YAAA,CAAA/C,EAAA;AAAA+C,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}