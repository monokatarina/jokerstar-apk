{"ast":null,"code":"// components/NotificationDropdown/NotificationDropdown.jsx\nimport React,{useState,useEffect,useRef}from'react';import styled,{keyframes,css}from'styled-components';import{useNotifications}from'../../contexts/NotificationContext';import{FiBell,FiCheck,FiTrash2,FiX}from'react-icons/fi';import{formatDistanceToNow}from'date-fns';import{ptBR}from'date-fns/locale/pt-BR';import{useNavigate}from'react-router-dom';// Animations\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const fadeIn=keyframes`\n  from { opacity: 0; transform: translateY(-10px); }\n  to { opacity: 1; transform: translateY(0); }\n`;const slideIn=keyframes`\n  from { transform: translateX(100%); }\n  to { transform: translateX(0); }\n`;// Styled Components\nconst Badge=styled.div`\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: var(--danger);\n  color: white;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  font-weight: bold;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n`;const NotificationButton=styled.button`\n  position: relative;\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.1);\n  }\n`;const Dropdown=styled.div`\n  position: absolute;\n  right: 0;\n  top: calc(100% + 10px);\n  width: 380px;\n  max-height: 500px;\n  overflow: hidden;\n  background: var(--card-bg);\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  display: ${_ref=>{let{$isOpen}=_ref;return $isOpen?'block':'none';}};\n  z-index: 1001;\n  animation: ${fadeIn} 0.2s ease-out;\n  transform-origin: top right;\n  border: 1px solid var(--border-light);\n  backdrop-filter: blur(10px);\n\n  @media (max-width: 768px) {\n    width: 320px;\n    right: -50px;\n  }\n`;const Header=styled.div`\n  padding: 1rem;\n  border-bottom: 1px solid var(--border-light);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.05);\n`;const Actions=styled.div`\n  display: flex;\n  gap: 0.5rem;\n`;const ActionButton=styled.button`\n  background: none;\n  border: none;\n  color: ${_ref2=>{let{$danger}=_ref2;return $danger?'var(--danger)':'var(--primary)';}};\n  cursor: pointer;\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.3rem 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ${_ref3=>{let{$danger}=_ref3;return $danger?'rgba(255, 69, 0, 0.1)':'rgba(0, 123, 255, 0.1)';}};\n    text-decoration: none;\n  }\n\n  svg {\n    font-size: 0.9rem;\n  }\n`;const NotificationList=styled.div`\n  max-height: 400px;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: var(--primary) transparent;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: var(--primary);\n    border-radius: 3px;\n  }\n`;const NotificationItem=styled.div`\n  padding: 1rem;\n  border-bottom: 1px solid var(--border-light);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  gap: 0.75rem;\n  position: relative;\n  background: ${_ref4=>{let{$unread}=_ref4;return $unread?'rgba(255, 69, 0, 0.05)':'transparent';}};\n  border-left: 3px solid\n    ${_ref5=>{let{$type}=_ref5;return $type==='like'?'var(--like-color)':$type==='comment'?'var(--comment-color)':$type==='reply'?'var(--reply-color)':'var(--primary)';}};\n  \n  &:hover {\n    background: rgba(255, 69, 0, 0.1);\n    transform: translateX(-2px);\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;const Avatar=styled.img`\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--border-light);\n  flex-shrink: 0;\n`;const Content=styled.div`\n  flex: 1;\n  min-width: 0;\n`;const Text=styled.div`\n  font-size: 0.9rem;\n  line-height: 1.4;\n  word-wrap: break-word;\n`;const HighlightText=styled.span`\n  color: var(--primary);\n  font-weight: 500;\n`;const QuoteText=styled.div`\n  font-style: italic;\n  margin-top: 4px;\n  padding: 6px 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  border-left: 2px solid var(--border-light);\n  color: var(--text-light);\n`;const Time=styled.div`\n  font-size: 0.75rem;\n  color: var(--text-lighter);\n  margin-top: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n`;const ReadIndicator=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  \n  svg {\n    color: var(--primary);\n    opacity: ${_ref6=>{let{$unread}=_ref6;return $unread?0:1;}};\n    transition: opacity 0.2s ease;\n  }\n`;const EmptyState=styled.div`\n  padding: 2rem 1rem;\n  text-align: center;\n  color: var(--text-lighter);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    font-size: 1.5rem;\n    opacity: 0.5;\n  }\n`;const ClearConfirmation=styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1002;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: ${fadeIn} 0.2s ease-out;\n`;const ConfirmationBox=styled.div`\n  background: var(--card-bg);\n  padding: 1.5rem;\n  border-radius: 12px;\n  width: 90%;\n  max-width: 350px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  animation: ${slideIn} 0.3s ease-out;\n`;const ConfirmationText=styled.p`\n  margin-bottom: 1.5rem;\n  text-align: center;\n`;const ConfirmationButtons=styled.div`\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n`;const ConfirmationButton=styled.button`\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:first-child {\n    background: var(--danger);\n    color: white;\n\n    &:hover {\n      background: #d63031;\n    }\n  }\n\n  &:last-child {\n    background: var(--border-light);\n    color: var(--text);\n\n    &:hover {\n      background: var(--border);\n    }\n  }\n`;const NotificationDropdown=()=>{const{notifications,unreadCount,markAsRead,clearAllNotifications,loading}=useNotifications();const[isOpen,setIsOpen]=useState(false);const[showClearConfirmation,setShowClearConfirmation]=useState(false);const dropdownRef=useRef(null);const navigate=useNavigate();// Fecha o dropdown quando clica fora\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Marca como lido quando o dropdown é aberto\nuseEffect(()=>{if(isOpen&&unreadCount>0){const unreadIds=notifications.filter(n=>!n.read).map(n=>n._id);if(unreadIds.length>0){markAsRead(unreadIds);}}},[isOpen,notifications,unreadCount,markAsRead]);const handleItemClick=notification=>{// Navega para o conteúdo relacionado usando React Router\nif(notification.meme){navigate(`/memes/${notification.meme._id}`);}else if(notification.comment){// Se você tiver uma página específica para comentários\nnavigate(`/memes/${notification.comment.meme}`,{state:{highlightComment:notification.comment._id}});// Ou alternativamente, se quiser rolar até o comentário:\n// navigate(`/memes/${notification.comment.meme}#comment-${notification.comment._id}`);\n}else if(notification.reply){// Similar para respostas\nnavigate(`/memes/${notification.reply.meme}`,{state:{highlightReply:notification.reply._id}});}setIsOpen(false);};const handleMarkAllRead=async()=>{const allUnreadIds=notifications.filter(n=>!n.read).map(n=>n._id);if(allUnreadIds.length>0){await markAsRead(allUnreadIds);}};const handleClearAll=async()=>{await clearAllNotifications();setShowClearConfirmation(false);setIsOpen(false);};const renderNotificationContent=notification=>{var _notification$sender,_notification$metadat,_notification$metadat2,_notification$sender2,_notification$meme,_notification$metadat3,_notification$meme2,_notification$sender3,_notification$comment,_notification$metadat4,_notification$meme3,_notification$sender4,_notification$metadat5,_notification$comment2;switch(notification.type){case'mention':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:(_notification$sender=notification.sender)===null||_notification$sender===void 0?void 0:_notification$sender.username}),\" te mencionou em um\",' ',((_notification$metadat=notification.metadata)===null||_notification$metadat===void 0?void 0:_notification$metadat.context)==='comment'?'comentário':'meme',((_notification$metadat2=notification.metadata)===null||_notification$metadat2===void 0?void 0:_notification$metadat2.text)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",truncate(notification.metadata.text,50),\"\\\"\"]})]});case'like':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:((_notification$sender2=notification.sender)===null||_notification$sender2===void 0?void 0:_notification$sender2.username)||'Alguém'}),\" curtiu seu meme\",((_notification$meme=notification.meme)===null||_notification$meme===void 0?void 0:_notification$meme.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",truncate(notification.meme.caption,50),\"\\\"\"]})]});case'like_grouped':return/*#__PURE__*/_jsxs(_Fragment,{children:[\"Seu meme tem \",/*#__PURE__*/_jsxs(HighlightText,{children:[((_notification$metadat3=notification.metadata)===null||_notification$metadat3===void 0?void 0:_notification$metadat3.count)||'muitas',\" curtidas\"]}),((_notification$meme2=notification.meme)===null||_notification$meme2===void 0?void 0:_notification$meme2.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",truncate(notification.meme.caption,50),\"\\\"\"]})]});case'comment':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:((_notification$sender3=notification.sender)===null||_notification$sender3===void 0?void 0:_notification$sender3.username)||'Alguém'}),\" comentou no seu meme:\",(_notification$comment=notification.comment)!==null&&_notification$comment!==void 0&&_notification$comment.text?/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",truncate(notification.comment.text,60),\"\\\"\"]}):/*#__PURE__*/_jsx(QuoteText,{children:\"Novo coment\\xE1rio\"})]});case'comment_grouped':return/*#__PURE__*/_jsxs(_Fragment,{children:[\"Seu meme tem \",/*#__PURE__*/_jsxs(HighlightText,{children:[((_notification$metadat4=notification.metadata)===null||_notification$metadat4===void 0?void 0:_notification$metadat4.count)||'muitos',\" coment\\xE1rios\"]}),((_notification$meme3=notification.meme)===null||_notification$meme3===void 0?void 0:_notification$meme3.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",truncate(notification.meme.caption,50),\"\\\"\"]})]});case'reply':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:(_notification$sender4=notification.sender)===null||_notification$sender4===void 0?void 0:_notification$sender4.username}),\" respondeu seu coment\\xE1rio:\",/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",(_notification$metadat5=notification.metadata)===null||_notification$metadat5===void 0?void 0:_notification$metadat5.text,\"\\\"\"]}),notification.comment&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,fontSize:12},children:[\"Em resposta a: \\\"\",(_notification$comment2=notification.comment.text)===null||_notification$comment2===void 0?void 0:_notification$comment2.substring(0,40),\"...\\\"\"]})]});default:return'Nova notificação';}};const truncate=(str,n)=>{return(str===null||str===void 0?void 0:str.length)>n?str.substr(0,n-1)+'...':str;};return/*#__PURE__*/_jsxs(\"div\",{ref:dropdownRef,style:{position:'relative'},children:[/*#__PURE__*/_jsxs(NotificationButton,{onClick:()=>setIsOpen(!isOpen),children:[/*#__PURE__*/_jsx(FiBell,{size:20}),unreadCount>0&&/*#__PURE__*/_jsx(Badge,{children:unreadCount>9?'9+':unreadCount})]}),/*#__PURE__*/_jsxs(Dropdown,{$isOpen:isOpen,children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Notifica\\xE7\\xF5es\"}),/*#__PURE__*/_jsxs(Actions,{children:[notifications.length>0&&/*#__PURE__*/_jsxs(ActionButton,{$danger:true,onClick:()=>setShowClearConfirmation(true),children:[/*#__PURE__*/_jsx(FiTrash2,{}),\" Limpar\"]}),notifications.some(n=>!n.read)&&/*#__PURE__*/_jsxs(ActionButton,{onClick:handleMarkAllRead,children:[/*#__PURE__*/_jsx(FiCheck,{}),\" Lidas\"]})]})]}),/*#__PURE__*/_jsx(NotificationList,{children:loading?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(FiBell,{}),\"Carregando notifica\\xE7\\xF5es...\"]}):notifications.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(FiBell,{}),\"Nenhuma notifica\\xE7\\xE3o\"]}):notifications.map(notification=>{var _notification$sender5,_notification$sender6,_notification$sender7;return/*#__PURE__*/_jsxs(NotificationItem,{$unread:!notification.read,$type:notification.type,onClick:()=>handleItemClick(notification),children:[/*#__PURE__*/_jsx(Avatar,{src:(_notification$sender5=notification.sender)!==null&&_notification$sender5!==void 0&&(_notification$sender6=_notification$sender5.profile)!==null&&_notification$sender6!==void 0&&_notification$sender6.avatar?notification.sender.profile.avatar.startsWith('https')?notification.sender.profile.avatar:`${process.env.REACT_APP_API_URL||'https://api.jokesteronline.org'}${notification.sender.profile.avatar}`:'https://i.pravatar.cc/150?img=3',alt:(_notification$sender7=notification.sender)===null||_notification$sender7===void 0?void 0:_notification$sender7.username,crossOrigin:\"anonymous\",onError:e=>{e.target.src='https://i.pravatar.cc/150?img=3';e.target.onerror=null;}}),/*#__PURE__*/_jsxs(Content,{children:[/*#__PURE__*/_jsx(Text,{children:renderNotificationContent(notification)}),/*#__PURE__*/_jsx(Time,{children:formatDistanceToNow(new Date(notification.createdAt),{addSuffix:true,locale:ptBR})})]}),/*#__PURE__*/_jsx(ReadIndicator,{$unread:!notification.read,children:/*#__PURE__*/_jsx(FiCheck,{size:18})})]},notification._id);})})]}),showClearConfirmation&&/*#__PURE__*/_jsx(ClearConfirmation,{children:/*#__PURE__*/_jsxs(ConfirmationBox,{children:[/*#__PURE__*/_jsxs(ConfirmationText,{children:[\"Tem certeza que deseja limpar todas as notifica\\xE7\\xF5es?\",/*#__PURE__*/_jsx(\"br\",{}),\"Esta a\\xE7\\xE3o n\\xE3o pode ser desfeita.\"]}),/*#__PURE__*/_jsxs(ConfirmationButtons,{children:[/*#__PURE__*/_jsx(ConfirmationButton,{onClick:handleClearAll,children:\"Limpar\"}),/*#__PURE__*/_jsx(ConfirmationButton,{onClick:()=>setShowClearConfirmation(false),children:\"Cancelar\"})]})]})})]});};export default NotificationDropdown;","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","keyframes","css","useNotifications","FiBell","FiCheck","FiTrash2","FiX","formatDistanceToNow","ptBR","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","fadeIn","slideIn","Badge","div","NotificationButton","button","Dropdown","_ref","$isOpen","Header","Actions","ActionButton","_ref2","$danger","_ref3","NotificationList","NotificationItem","_ref4","$unread","_ref5","$type","Avatar","img","Content","Text","HighlightText","span","QuoteText","Time","ReadIndicator","_ref6","EmptyState","ClearConfirmation","ConfirmationBox","ConfirmationText","p","ConfirmationButtons","ConfirmationButton","NotificationDropdown","notifications","unreadCount","markAsRead","clearAllNotifications","loading","isOpen","setIsOpen","showClearConfirmation","setShowClearConfirmation","dropdownRef","navigate","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","unreadIds","filter","n","read","map","_id","length","handleItemClick","notification","meme","comment","state","highlightComment","reply","highlightReply","handleMarkAllRead","allUnreadIds","handleClearAll","renderNotificationContent","_notification$sender","_notification$metadat","_notification$metadat2","_notification$sender2","_notification$meme","_notification$metadat3","_notification$meme2","_notification$sender3","_notification$comment","_notification$metadat4","_notification$meme3","_notification$sender4","_notification$metadat5","_notification$comment2","type","children","sender","username","metadata","context","text","truncate","caption","count","style","marginTop","fontSize","substring","str","substr","ref","position","onClick","size","some","_notification$sender5","_notification$sender6","_notification$sender7","src","profile","avatar","startsWith","process","env","REACT_APP_API_URL","alt","crossOrigin","onError","e","onerror","Date","createdAt","addSuffix","locale"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/client2/src/components/NotificationDropdown/NotificationDropdown.jsx"],"sourcesContent":["// components/NotificationDropdown/NotificationDropdown.jsx\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport styled, { keyframes, css } from 'styled-components';\r\nimport { useNotifications } from '../../contexts/NotificationContext';\r\nimport { FiBell, FiCheck, FiTrash2, FiX } from 'react-icons/fi';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale/pt-BR';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// Animations\r\nconst fadeIn = keyframes`\r\n  from { opacity: 0; transform: translateY(-10px); }\r\n  to { opacity: 1; transform: translateY(0); }\r\n`;\r\n\r\nconst slideIn = keyframes`\r\n  from { transform: translateX(100%); }\r\n  to { transform: translateX(0); }\r\n`;\r\n\r\n// Styled Components\r\nconst Badge = styled.div`\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background: var(--danger);\r\n  color: white;\r\n  border-radius: 50%;\r\n  width: 18px;\r\n  height: 18px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 10px;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst NotificationButton = styled.button`\r\n  position: relative;\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: 0.5rem;\r\n  border-radius: 50%;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst Dropdown = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  top: calc(100% + 10px);\r\n  width: 380px;\r\n  max-height: 500px;\r\n  overflow: hidden;\r\n  background: var(--card-bg);\r\n  border-radius: 12px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  display: ${({ $isOpen }) => ($isOpen ? 'block' : 'none')};\r\n  z-index: 1001;\r\n  animation: ${fadeIn} 0.2s ease-out;\r\n  transform-origin: top right;\r\n  border: 1px solid var(--border-light);\r\n  backdrop-filter: blur(10px);\r\n\r\n  @media (max-width: 768px) {\r\n    width: 320px;\r\n    right: -50px;\r\n  }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  padding: 1rem;\r\n  border-bottom: 1px solid var(--border-light);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  background: rgba(255, 255, 255, 0.05);\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  gap: 0.5rem;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: ${({ $danger }) => ($danger ? 'var(--danger)' : 'var(--primary)')};\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.3rem;\r\n  padding: 0.3rem 0.5rem;\r\n  border-radius: 6px;\r\n  transition: all 0.2s ease;\r\n  \r\n  &:hover {\r\n    background: ${({ $danger }) => ($danger ? 'rgba(255, 69, 0, 0.1)' : 'rgba(0, 123, 255, 0.1)')};\r\n    text-decoration: none;\r\n  }\r\n\r\n  svg {\r\n    font-size: 0.9rem;\r\n  }\r\n`;\r\n\r\nconst NotificationList = styled.div`\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  scrollbar-width: thin;\r\n  scrollbar-color: var(--primary) transparent;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 6px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background-color: var(--primary);\r\n    border-radius: 3px;\r\n  }\r\n`;\r\n\r\nconst NotificationItem = styled.div`\r\n  padding: 1rem;\r\n  border-bottom: 1px solid var(--border-light);\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  position: relative;\r\n  background: ${({ $unread }) => ($unread ? 'rgba(255, 69, 0, 0.05)' : 'transparent')};\r\n  border-left: 3px solid\r\n    ${({ $type }) => \r\n      $type === 'like' ? 'var(--like-color)' :\r\n      $type === 'comment' ? 'var(--comment-color)' :\r\n      $type === 'reply' ? 'var(--reply-color)' :\r\n      'var(--primary)'};\r\n  \r\n  &:hover {\r\n    background: rgba(255, 69, 0, 0.1);\r\n    transform: translateX(-2px);\r\n  }\r\n\r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  border: 2px solid var(--border-light);\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  font-size: 0.9rem;\r\n  line-height: 1.4;\r\n  word-wrap: break-word;\r\n`;\r\n\r\nconst HighlightText = styled.span`\r\n  color: var(--primary);\r\n  font-weight: 500;\r\n`;\r\n\r\nconst QuoteText = styled.div`\r\n  font-style: italic;\r\n  margin-top: 4px;\r\n  padding: 6px 8px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 6px;\r\n  border-left: 2px solid var(--border-light);\r\n  color: var(--text-light);\r\n`;\r\n\r\nconst Time = styled.div`\r\n  font-size: 0.75rem;\r\n  color: var(--text-lighter);\r\n  margin-top: 0.25rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.3rem;\r\n`;\r\n\r\nconst ReadIndicator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 20px;\r\n  \r\n  svg {\r\n    color: var(--primary);\r\n    opacity: ${({ $unread }) => ($unread ? 0 : 1)};\r\n    transition: opacity 0.2s ease;\r\n  }\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  padding: 2rem 1rem;\r\n  text-align: center;\r\n  color: var(--text-lighter);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n\r\n  svg {\r\n    font-size: 1.5rem;\r\n    opacity: 0.5;\r\n  }\r\n`;\r\n\r\nconst ClearConfirmation = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 1002;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  animation: ${fadeIn} 0.2s ease-out;\r\n`;\r\n\r\nconst ConfirmationBox = styled.div`\r\n  background: var(--card-bg);\r\n  padding: 1.5rem;\r\n  border-radius: 12px;\r\n  width: 90%;\r\n  max-width: 350px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\r\n  animation: ${slideIn} 0.3s ease-out;\r\n`;\r\n\r\nconst ConfirmationText = styled.p`\r\n  margin-bottom: 1.5rem;\r\n  text-align: center;\r\n`;\r\n\r\nconst ConfirmationButtons = styled.div`\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ConfirmationButton = styled.button`\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 6px;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n\r\n  &:first-child {\r\n    background: var(--danger);\r\n    color: white;\r\n\r\n    &:hover {\r\n      background: #d63031;\r\n    }\r\n  }\r\n\r\n  &:last-child {\r\n    background: var(--border-light);\r\n    color: var(--text);\r\n\r\n    &:hover {\r\n      background: var(--border);\r\n    }\r\n  }\r\n`;\r\n\r\nconst NotificationDropdown = () => {\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    markAsRead,\r\n    clearAllNotifications,\r\n    loading\r\n  } = useNotifications();\r\n  \r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [showClearConfirmation, setShowClearConfirmation] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Fecha o dropdown quando clica fora\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // Marca como lido quando o dropdown é aberto\r\n  useEffect(() => {\r\n    if (isOpen && unreadCount > 0) {\r\n      const unreadIds = notifications\r\n        .filter(n => !n.read)\r\n        .map(n => n._id);\r\n      \r\n      if (unreadIds.length > 0) {\r\n        markAsRead(unreadIds);\r\n      }\r\n    }\r\n  }, [isOpen, notifications, unreadCount, markAsRead]);\r\n\r\nconst handleItemClick = (notification) => {\r\n  // Navega para o conteúdo relacionado usando React Router\r\n  if (notification.meme) {\r\n    navigate(`/memes/${notification.meme._id}`);\r\n  } else if (notification.comment) {\r\n    // Se você tiver uma página específica para comentários\r\n    navigate(`/memes/${notification.comment.meme}`, { state: { highlightComment: notification.comment._id } });\r\n    // Ou alternativamente, se quiser rolar até o comentário:\r\n    // navigate(`/memes/${notification.comment.meme}#comment-${notification.comment._id}`);\r\n  } else if (notification.reply) {\r\n    // Similar para respostas\r\n    navigate(`/memes/${notification.reply.meme}`, { state: { highlightReply: notification.reply._id } });\r\n  }\r\n  setIsOpen(false);\r\n};\r\n\r\n  const handleMarkAllRead = async () => {\r\n    const allUnreadIds = notifications\r\n      .filter(n => !n.read)\r\n      .map(n => n._id);\r\n    \r\n    if (allUnreadIds.length > 0) {\r\n      await markAsRead(allUnreadIds);\r\n    }\r\n  };\r\n\r\n  const handleClearAll = async () => {\r\n    await clearAllNotifications();\r\n    setShowClearConfirmation(false);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const renderNotificationContent = (notification) => {\r\n\r\n    \r\n    switch(notification.type) {\r\n      case 'mention':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username}</HighlightText> te mencionou em um{' '}\r\n            {notification.metadata?.context === 'comment' ? 'comentário' : 'meme'}\r\n            {notification.metadata?.text && (\r\n              <QuoteText>\r\n                \"{truncate(notification.metadata.text, 50)}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      case 'like':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username || 'Alguém'}</HighlightText> curtiu seu meme\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{truncate(notification.meme.caption, 50)}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n      case 'like_grouped':\r\n        return (\r\n          <>\r\n            Seu meme tem <HighlightText>{notification.metadata?.count || 'muitas'} curtidas</HighlightText>\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{truncate(notification.meme.caption, 50)}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n      case 'comment':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username || 'Alguém'}</HighlightText> comentou no seu meme: \r\n            {notification.comment?.text ? (\r\n              <QuoteText>\r\n                \"{truncate(notification.comment.text, 60)}\"\r\n              </QuoteText>\r\n            ) : (\r\n              <QuoteText>Novo comentário</QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n      case 'comment_grouped':\r\n        return (\r\n          <>\r\n            Seu meme tem <HighlightText>{notification.metadata?.count || 'muitos'} comentários</HighlightText>\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{truncate(notification.meme.caption, 50)}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n      case 'reply':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username}</HighlightText> respondeu seu comentário:\r\n            <QuoteText>\r\n              \"{notification.metadata?.text}\"\r\n            </QuoteText>\r\n            {notification.comment && (\r\n              <div style={{ marginTop: 4, fontSize: 12 }}>\r\n                Em resposta a: \"{notification.comment.text?.substring(0, 40)}...\"\r\n              </div>\r\n            )}\r\n          </>\r\n        );\r\n      default:\r\n        return 'Nova notificação';\r\n    }\r\n  };\r\n\r\n  const truncate = (str, n) => {\r\n    return str?.length > n ? str.substr(0, n-1) + '...' : str;\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} style={{ position: 'relative' }}>\r\n      <NotificationButton onClick={() => setIsOpen(!isOpen)}>\r\n        <FiBell size={20} />\r\n        {unreadCount > 0 && <Badge>{unreadCount > 9 ? '9+' : unreadCount}</Badge>}\r\n      </NotificationButton>\r\n      \r\n      <Dropdown $isOpen={isOpen}>\r\n        <Header>\r\n          <span>Notificações</span>\r\n          <Actions>\r\n            {notifications.length > 0 && (\r\n              <ActionButton $danger onClick={() => setShowClearConfirmation(true)}>\r\n                <FiTrash2 /> Limpar\r\n              </ActionButton>\r\n            )}\r\n            {notifications.some(n => !n.read) && (\r\n              <ActionButton onClick={handleMarkAllRead}>\r\n                <FiCheck /> Lidas\r\n              </ActionButton>\r\n            )}\r\n          </Actions>\r\n        </Header>\r\n        \r\n        <NotificationList>\r\n          {loading ? (\r\n            <EmptyState>\r\n              <FiBell />\r\n              Carregando notificações...\r\n            </EmptyState>\r\n          ) : notifications.length === 0 ? (\r\n            <EmptyState>\r\n              <FiBell />\r\n              Nenhuma notificação\r\n            </EmptyState>\r\n          ) : (\r\n            notifications.map(notification => (\r\n              <NotificationItem\r\n                key={notification._id}\r\n                $unread={!notification.read}\r\n                $type={notification.type}\r\n                onClick={() => handleItemClick(notification)}\r\n              >\r\n                <Avatar\r\n                  src={\r\n                    notification.sender?.profile?.avatar\r\n                      ? notification.sender.profile.avatar.startsWith('https')\r\n                        ? notification.sender.profile.avatar\r\n                        : `${process.env.REACT_APP_API_URL || 'https://api.jokesteronline.org'}${notification.sender.profile.avatar}`\r\n                      : 'https://i.pravatar.cc/150?img=3'\r\n                  }\r\n                  alt={notification.sender?.username}\r\n                  crossOrigin=\"anonymous\"\r\n                  onError={(e) => {\r\n                    e.target.src = 'https://i.pravatar.cc/150?img=3';\r\n                    e.target.onerror = null;\r\n                  }}\r\n                />\r\n                \r\n                <Content>\r\n                  <Text>\r\n                    {renderNotificationContent(notification)}\r\n                  </Text>\r\n                  <Time>\r\n                    {formatDistanceToNow(new Date(notification.createdAt), {\r\n                      addSuffix: true,\r\n                      locale: ptBR\r\n                    })}\r\n                  </Time>\r\n                </Content>\r\n                \r\n                <ReadIndicator $unread={!notification.read}>\r\n                  <FiCheck size={18} />\r\n                </ReadIndicator>\r\n              </NotificationItem>\r\n            ))\r\n          )}\r\n        </NotificationList>\r\n      </Dropdown>\r\n\r\n      {showClearConfirmation && (\r\n        <ClearConfirmation>\r\n          <ConfirmationBox>\r\n            <ConfirmationText>\r\n              Tem certeza que deseja limpar todas as notificações?\r\n              <br />\r\n              Esta ação não pode ser desfeita.\r\n            </ConfirmationText>\r\n            <ConfirmationButtons>\r\n              <ConfirmationButton onClick={handleClearAll}>\r\n                Limpar\r\n              </ConfirmationButton>\r\n              <ConfirmationButton onClick={() => setShowClearConfirmation(false)}>\r\n                Cancelar\r\n              </ConfirmationButton>\r\n            </ConfirmationButtons>\r\n          </ConfirmationBox>\r\n        </ClearConfirmation>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationDropdown;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAO,CAAAC,MAAM,EAAIC,SAAS,CAAEC,GAAG,KAAQ,mBAAmB,CAC1D,OAASC,gBAAgB,KAAQ,oCAAoC,CACrE,OAASC,MAAM,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,GAAG,KAAQ,gBAAgB,CAC/D,OAASC,mBAAmB,KAAQ,UAAU,CAC9C,OAASC,IAAI,KAAQ,uBAAuB,CAC5C,OAASC,WAAW,KAAQ,kBAAkB,CAE9C;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,MAAM,CAAGhB,SAAS;AACxB;AACA;AACA,CAAC,CAED,KAAM,CAAAiB,OAAO,CAAGjB,SAAS;AACzB;AACA;AACA,CAAC,CAED;AACA,KAAM,CAAAkB,KAAK,CAAGnB,MAAM,CAACoB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAGrB,MAAM,CAACsB,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGvB,MAAM,CAACoB,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAaI,IAAA,MAAC,CAAEC,OAAQ,CAAC,CAAAD,IAAA,OAAM,CAAAC,OAAO,CAAG,OAAO,CAAG,MAAM,EAAC;AAC1D;AACA,eAAeR,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,MAAM,CAAG1B,MAAM,CAACoB,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAO,OAAO,CAAG3B,MAAM,CAACoB,GAAG;AAC1B;AACA;AACA,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAG5B,MAAM,CAACsB,MAAM;AAClC;AACA;AACA,WAAWO,KAAA,MAAC,CAAEC,OAAQ,CAAC,CAAAD,KAAA,OAAM,CAAAC,OAAO,CAAG,eAAe,CAAG,gBAAgB,EAAC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBC,KAAA,MAAC,CAAED,OAAQ,CAAC,CAAAC,KAAA,OAAM,CAAAD,OAAO,CAAG,uBAAuB,CAAG,wBAAwB,EAAC;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAGhC,MAAM,CAACoB,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,gBAAgB,CAAGjC,MAAM,CAACoB,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgBc,KAAA,MAAC,CAAEC,OAAQ,CAAC,CAAAD,KAAA,OAAM,CAAAC,OAAO,CAAG,wBAAwB,CAAG,aAAa,EAAC;AACrF;AACA,MAAMC,KAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,KAAA,OACV,CAAAC,KAAK,GAAK,MAAM,CAAG,mBAAmB,CACtCA,KAAK,GAAK,SAAS,CAAG,sBAAsB,CAC5CA,KAAK,GAAK,OAAO,CAAG,oBAAoB,CACxC,gBAAgB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGtC,MAAM,CAACuC,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,OAAO,CAAGxC,MAAM,CAACoB,GAAG;AAC1B;AACA;AACA,CAAC,CAED,KAAM,CAAAqB,IAAI,CAAGzC,MAAM,CAACoB,GAAG;AACvB;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAsB,aAAa,CAAG1C,MAAM,CAAC2C,IAAI;AACjC;AACA;AACA,CAAC,CAED,KAAM,CAAAC,SAAS,CAAG5C,MAAM,CAACoB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAyB,IAAI,CAAG7C,MAAM,CAACoB,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA0B,aAAa,CAAG9C,MAAM,CAACoB,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe2B,KAAA,MAAC,CAAEZ,OAAQ,CAAC,CAAAY,KAAA,OAAM,CAAAZ,OAAO,CAAG,CAAC,CAAG,CAAC,EAAC;AACjD;AACA;AACA,CAAC,CAED,KAAM,CAAAa,UAAU,CAAGhD,MAAM,CAACoB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA6B,iBAAiB,CAAGjD,MAAM,CAACoB,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeH,MAAM;AACrB,CAAC,CAED,KAAM,CAAAiC,eAAe,CAAGlD,MAAM,CAACoB,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,eAAeF,OAAO;AACtB,CAAC,CAED,KAAM,CAAAiC,gBAAgB,CAAGnD,MAAM,CAACoD,CAAC;AACjC;AACA;AACA,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAGrD,MAAM,CAACoB,GAAG;AACtC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAkC,kBAAkB,CAAGtD,MAAM,CAACsB,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAiC,oBAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CACJC,aAAa,CACbC,WAAW,CACXC,UAAU,CACVC,qBAAqB,CACrBC,OACF,CAAC,CAAGzD,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAC0D,MAAM,CAAEC,SAAS,CAAC,CAAGjE,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACkE,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGnE,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAAAoE,WAAW,CAAGlE,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAAmE,QAAQ,CAAGxD,WAAW,CAAC,CAAC,CAE9B;AACAZ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqE,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIH,WAAW,CAACI,OAAO,EAAI,CAACJ,WAAW,CAACI,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CACtET,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAEDU,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACArE,SAAS,CAAC,IAAM,CACd,GAAI+D,MAAM,EAAIJ,WAAW,CAAG,CAAC,CAAE,CAC7B,KAAM,CAAAkB,SAAS,CAAGnB,aAAa,CAC5BoB,MAAM,CAACC,CAAC,EAAI,CAACA,CAAC,CAACC,IAAI,CAAC,CACpBC,GAAG,CAACF,CAAC,EAAIA,CAAC,CAACG,GAAG,CAAC,CAElB,GAAIL,SAAS,CAACM,MAAM,CAAG,CAAC,CAAE,CACxBvB,UAAU,CAACiB,SAAS,CAAC,CACvB,CACF,CACF,CAAC,CAAE,CAACd,MAAM,CAAEL,aAAa,CAAEC,WAAW,CAAEC,UAAU,CAAC,CAAC,CAEtD,KAAM,CAAAwB,eAAe,CAAIC,YAAY,EAAK,CACxC;AACA,GAAIA,YAAY,CAACC,IAAI,CAAE,CACrBlB,QAAQ,CAAC,UAAUiB,YAAY,CAACC,IAAI,CAACJ,GAAG,EAAE,CAAC,CAC7C,CAAC,IAAM,IAAIG,YAAY,CAACE,OAAO,CAAE,CAC/B;AACAnB,QAAQ,CAAC,UAAUiB,YAAY,CAACE,OAAO,CAACD,IAAI,EAAE,CAAE,CAAEE,KAAK,CAAE,CAAEC,gBAAgB,CAAEJ,YAAY,CAACE,OAAO,CAACL,GAAI,CAAE,CAAC,CAAC,CAC1G;AACA;AACF,CAAC,IAAM,IAAIG,YAAY,CAACK,KAAK,CAAE,CAC7B;AACAtB,QAAQ,CAAC,UAAUiB,YAAY,CAACK,KAAK,CAACJ,IAAI,EAAE,CAAE,CAAEE,KAAK,CAAE,CAAEG,cAAc,CAAEN,YAAY,CAACK,KAAK,CAACR,GAAI,CAAE,CAAC,CAAC,CACtG,CACAlB,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,CAEC,KAAM,CAAA4B,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,KAAM,CAAAC,YAAY,CAAGnC,aAAa,CAC/BoB,MAAM,CAACC,CAAC,EAAI,CAACA,CAAC,CAACC,IAAI,CAAC,CACpBC,GAAG,CAACF,CAAC,EAAIA,CAAC,CAACG,GAAG,CAAC,CAElB,GAAIW,YAAY,CAACV,MAAM,CAAG,CAAC,CAAE,CAC3B,KAAM,CAAAvB,UAAU,CAACiC,YAAY,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,KAAM,CAAAjC,qBAAqB,CAAC,CAAC,CAC7BK,wBAAwB,CAAC,KAAK,CAAC,CAC/BF,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,CAED,KAAM,CAAA+B,yBAAyB,CAAIV,YAAY,EAAK,KAAAW,oBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,kBAAA,CAAAC,sBAAA,CAAAC,mBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,mBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAGlD,OAAOxB,YAAY,CAACyB,IAAI,EACtB,IAAK,SAAS,CACZ,mBACE9F,KAAA,CAAAE,SAAA,EAAA6F,QAAA,eACEjG,IAAA,CAAC8B,aAAa,EAAAmE,QAAA,EAAAf,oBAAA,CAAEX,YAAY,CAAC2B,MAAM,UAAAhB,oBAAA,iBAAnBA,oBAAA,CAAqBiB,QAAQ,CAAgB,CAAC,sBAAmB,CAAC,GAAG,CACpF,EAAAhB,qBAAA,CAAAZ,YAAY,CAAC6B,QAAQ,UAAAjB,qBAAA,iBAArBA,qBAAA,CAAuBkB,OAAO,IAAK,SAAS,CAAG,YAAY,CAAG,MAAM,CACpE,EAAAjB,sBAAA,CAAAb,YAAY,CAAC6B,QAAQ,UAAAhB,sBAAA,iBAArBA,sBAAA,CAAuBkB,IAAI,gBAC1BpG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,CAACM,QAAQ,CAAChC,YAAY,CAAC6B,QAAQ,CAACE,IAAI,CAAE,EAAE,CAAC,CAAC,IAC7C,EAAW,CACZ,EACD,CAAC,CAGP,IAAK,MAAM,CACT,mBACEpG,KAAA,CAAAE,SAAA,EAAA6F,QAAA,eACEjG,IAAA,CAAC8B,aAAa,EAAAmE,QAAA,CAAE,EAAAZ,qBAAA,CAAAd,YAAY,CAAC2B,MAAM,UAAAb,qBAAA,iBAAnBA,qBAAA,CAAqBc,QAAQ,GAAI,QAAQ,CAAgB,CAAC,mBAC1E,CAAC,EAAAb,kBAAA,CAAAf,YAAY,CAACC,IAAI,UAAAc,kBAAA,iBAAjBA,kBAAA,CAAmBkB,OAAO,gBACzBtG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,CAACM,QAAQ,CAAChC,YAAY,CAACC,IAAI,CAACgC,OAAO,CAAE,EAAE,CAAC,CAAC,IAC5C,EAAW,CACZ,EACD,CAAC,CAEP,IAAK,cAAc,CACjB,mBACEtG,KAAA,CAAAE,SAAA,EAAA6F,QAAA,EAAE,eACa,cAAA/F,KAAA,CAAC4B,aAAa,EAAAmE,QAAA,EAAE,EAAAV,sBAAA,CAAAhB,YAAY,CAAC6B,QAAQ,UAAAb,sBAAA,iBAArBA,sBAAA,CAAuBkB,KAAK,GAAI,QAAQ,CAAC,WAAS,EAAe,CAAC,CAC9F,EAAAjB,mBAAA,CAAAjB,YAAY,CAACC,IAAI,UAAAgB,mBAAA,iBAAjBA,mBAAA,CAAmBgB,OAAO,gBACzBtG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,CAACM,QAAQ,CAAChC,YAAY,CAACC,IAAI,CAACgC,OAAO,CAAE,EAAE,CAAC,CAAC,IAC5C,EAAW,CACZ,EACD,CAAC,CAEP,IAAK,SAAS,CACZ,mBACEtG,KAAA,CAAAE,SAAA,EAAA6F,QAAA,eACEjG,IAAA,CAAC8B,aAAa,EAAAmE,QAAA,CAAE,EAAAR,qBAAA,CAAAlB,YAAY,CAAC2B,MAAM,UAAAT,qBAAA,iBAAnBA,qBAAA,CAAqBU,QAAQ,GAAI,QAAQ,CAAgB,CAAC,yBAC1E,CAAC,CAAAT,qBAAA,CAAAnB,YAAY,CAACE,OAAO,UAAAiB,qBAAA,WAApBA,qBAAA,CAAsBY,IAAI,cACzBpG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,CAACM,QAAQ,CAAChC,YAAY,CAACE,OAAO,CAAC6B,IAAI,CAAE,EAAE,CAAC,CAAC,IAC5C,EAAW,CAAC,cAEZtG,IAAA,CAACgC,SAAS,EAAAiE,QAAA,CAAC,oBAAe,CAAW,CACtC,EACD,CAAC,CAEP,IAAK,iBAAiB,CACpB,mBACE/F,KAAA,CAAAE,SAAA,EAAA6F,QAAA,EAAE,eACa,cAAA/F,KAAA,CAAC4B,aAAa,EAAAmE,QAAA,EAAE,EAAAN,sBAAA,CAAApB,YAAY,CAAC6B,QAAQ,UAAAT,sBAAA,iBAArBA,sBAAA,CAAuBc,KAAK,GAAI,QAAQ,CAAC,iBAAY,EAAe,CAAC,CACjG,EAAAb,mBAAA,CAAArB,YAAY,CAACC,IAAI,UAAAoB,mBAAA,iBAAjBA,mBAAA,CAAmBY,OAAO,gBACzBtG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,CAACM,QAAQ,CAAChC,YAAY,CAACC,IAAI,CAACgC,OAAO,CAAE,EAAE,CAAC,CAAC,IAC5C,EAAW,CACZ,EACD,CAAC,CAEP,IAAK,OAAO,CACV,mBACEtG,KAAA,CAAAE,SAAA,EAAA6F,QAAA,eACEjG,IAAA,CAAC8B,aAAa,EAAAmE,QAAA,EAAAJ,qBAAA,CAAEtB,YAAY,CAAC2B,MAAM,UAAAL,qBAAA,iBAAnBA,qBAAA,CAAqBM,QAAQ,CAAgB,CAAC,gCAC9D,cAAAjG,KAAA,CAAC8B,SAAS,EAAAiE,QAAA,EAAC,IACR,EAAAH,sBAAA,CAACvB,YAAY,CAAC6B,QAAQ,UAAAN,sBAAA,iBAArBA,sBAAA,CAAuBQ,IAAI,CAAC,IAChC,EAAW,CAAC,CACX/B,YAAY,CAACE,OAAO,eACnBvE,KAAA,QAAKwG,KAAK,CAAE,CAAEC,SAAS,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAAAX,QAAA,EAAC,mBAC1B,EAAAF,sBAAA,CAACxB,YAAY,CAACE,OAAO,CAAC6B,IAAI,UAAAP,sBAAA,iBAAzBA,sBAAA,CAA2Bc,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,OAC/D,EAAK,CACN,EACD,CAAC,CAEP,QACE,MAAO,kBAAkB,CAC7B,CACF,CAAC,CAED,KAAM,CAAAN,QAAQ,CAAGA,CAACO,GAAG,CAAE7C,CAAC,GAAK,CAC3B,MAAO,CAAA6C,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEzC,MAAM,EAAGJ,CAAC,CAAG6C,GAAG,CAACC,MAAM,CAAC,CAAC,CAAE9C,CAAC,CAAC,CAAC,CAAC,CAAG,KAAK,CAAG6C,GAAG,CAC3D,CAAC,CAED,mBACE5G,KAAA,QAAK8G,GAAG,CAAE3D,WAAY,CAACqD,KAAK,CAAE,CAAEO,QAAQ,CAAE,UAAW,CAAE,CAAAhB,QAAA,eACrD/F,KAAA,CAACO,kBAAkB,EAACyG,OAAO,CAAEA,CAAA,GAAMhE,SAAS,CAAC,CAACD,MAAM,CAAE,CAAAgD,QAAA,eACpDjG,IAAA,CAACR,MAAM,EAAC2H,IAAI,CAAE,EAAG,CAAE,CAAC,CACnBtE,WAAW,CAAG,CAAC,eAAI7C,IAAA,CAACO,KAAK,EAAA0F,QAAA,CAAEpD,WAAW,CAAG,CAAC,CAAG,IAAI,CAAGA,WAAW,CAAQ,CAAC,EACvD,CAAC,cAErB3C,KAAA,CAACS,QAAQ,EAACE,OAAO,CAAEoC,MAAO,CAAAgD,QAAA,eACxB/F,KAAA,CAACY,MAAM,EAAAmF,QAAA,eACLjG,IAAA,SAAAiG,QAAA,CAAM,oBAAY,CAAM,CAAC,cACzB/F,KAAA,CAACa,OAAO,EAAAkF,QAAA,EACLrD,aAAa,CAACyB,MAAM,CAAG,CAAC,eACvBnE,KAAA,CAACc,YAAY,EAACE,OAAO,MAACgG,OAAO,CAAEA,CAAA,GAAM9D,wBAAwB,CAAC,IAAI,CAAE,CAAA6C,QAAA,eAClEjG,IAAA,CAACN,QAAQ,GAAE,CAAC,UACd,EAAc,CACf,CACAkD,aAAa,CAACwE,IAAI,CAACnD,CAAC,EAAI,CAACA,CAAC,CAACC,IAAI,CAAC,eAC/BhE,KAAA,CAACc,YAAY,EAACkG,OAAO,CAAEpC,iBAAkB,CAAAmB,QAAA,eACvCjG,IAAA,CAACP,OAAO,GAAE,CAAC,SACb,EAAc,CACf,EACM,CAAC,EACJ,CAAC,cAETO,IAAA,CAACoB,gBAAgB,EAAA6E,QAAA,CACdjD,OAAO,cACN9C,KAAA,CAACkC,UAAU,EAAA6D,QAAA,eACTjG,IAAA,CAACR,MAAM,GAAE,CAAC,mCAEZ,EAAY,CAAC,CACXoD,aAAa,CAACyB,MAAM,GAAK,CAAC,cAC5BnE,KAAA,CAACkC,UAAU,EAAA6D,QAAA,eACTjG,IAAA,CAACR,MAAM,GAAE,CAAC,4BAEZ,EAAY,CAAC,CAEboD,aAAa,CAACuB,GAAG,CAACI,YAAY,OAAA8C,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,oBAC5BrH,KAAA,CAACmB,gBAAgB,EAEfE,OAAO,CAAE,CAACgD,YAAY,CAACL,IAAK,CAC5BzC,KAAK,CAAE8C,YAAY,CAACyB,IAAK,CACzBkB,OAAO,CAAEA,CAAA,GAAM5C,eAAe,CAACC,YAAY,CAAE,CAAA0B,QAAA,eAE7CjG,IAAA,CAAC0B,MAAM,EACL8F,GAAG,CACD,CAAAH,qBAAA,CAAA9C,YAAY,CAAC2B,MAAM,UAAAmB,qBAAA,YAAAC,qBAAA,CAAnBD,qBAAA,CAAqBI,OAAO,UAAAH,qBAAA,WAA5BA,qBAAA,CAA8BI,MAAM,CAChCnD,YAAY,CAAC2B,MAAM,CAACuB,OAAO,CAACC,MAAM,CAACC,UAAU,CAAC,OAAO,CAAC,CACpDpD,YAAY,CAAC2B,MAAM,CAACuB,OAAO,CAACC,MAAM,CAClC,GAAGE,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,gCAAgC,GAAGvD,YAAY,CAAC2B,MAAM,CAACuB,OAAO,CAACC,MAAM,EAAE,CAC7G,iCACL,CACDK,GAAG,EAAAR,qBAAA,CAAEhD,YAAY,CAAC2B,MAAM,UAAAqB,qBAAA,iBAAnBA,qBAAA,CAAqBpB,QAAS,CACnC6B,WAAW,CAAC,WAAW,CACvBC,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACvE,MAAM,CAAC6D,GAAG,CAAG,iCAAiC,CAChDU,CAAC,CAACvE,MAAM,CAACwE,OAAO,CAAG,IAAI,CACzB,CAAE,CACH,CAAC,cAEFjI,KAAA,CAAC0B,OAAO,EAAAqE,QAAA,eACNjG,IAAA,CAAC6B,IAAI,EAAAoE,QAAA,CACFhB,yBAAyB,CAACV,YAAY,CAAC,CACpC,CAAC,cACPvE,IAAA,CAACiC,IAAI,EAAAgE,QAAA,CACFrG,mBAAmB,CAAC,GAAI,CAAAwI,IAAI,CAAC7D,YAAY,CAAC8D,SAAS,CAAC,CAAE,CACrDC,SAAS,CAAE,IAAI,CACfC,MAAM,CAAE1I,IACV,CAAC,CAAC,CACE,CAAC,EACA,CAAC,cAEVG,IAAA,CAACkC,aAAa,EAACX,OAAO,CAAE,CAACgD,YAAY,CAACL,IAAK,CAAA+B,QAAA,cACzCjG,IAAA,CAACP,OAAO,EAAC0H,IAAI,CAAE,EAAG,CAAE,CAAC,CACR,CAAC,GAnCX5C,YAAY,CAACH,GAoCF,CAAC,EACpB,CACF,CACe,CAAC,EACX,CAAC,CAEVjB,qBAAqB,eACpBnD,IAAA,CAACqC,iBAAiB,EAAA4D,QAAA,cAChB/F,KAAA,CAACoC,eAAe,EAAA2D,QAAA,eACd/F,KAAA,CAACqC,gBAAgB,EAAA0D,QAAA,EAAC,4DAEhB,cAAAjG,IAAA,QAAK,CAAC,4CAER,EAAkB,CAAC,cACnBE,KAAA,CAACuC,mBAAmB,EAAAwD,QAAA,eAClBjG,IAAA,CAAC0C,kBAAkB,EAACwE,OAAO,CAAElC,cAAe,CAAAiB,QAAA,CAAC,QAE7C,CAAoB,CAAC,cACrBjG,IAAA,CAAC0C,kBAAkB,EAACwE,OAAO,CAAEA,CAAA,GAAM9D,wBAAwB,CAAC,KAAK,CAAE,CAAA6C,QAAA,CAAC,UAEpE,CAAoB,CAAC,EACF,CAAC,EACP,CAAC,CACD,CACpB,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtD,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}