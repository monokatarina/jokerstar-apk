{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import styled,{keyframes}from'styled-components';import{useNotifications}from'../../contexts/NotificationContext';import{FiBell,FiCheck,FiTrash2}from'react-icons/fi';import{formatDistanceToNow}from'date-fns';import{ptBR}from'date-fns/locale/pt-BR';import{useNavigate}from'react-router-dom';import{StatusBar}from'@capacitor/status-bar';import{Capacitor}from'@capacitor/core';// Animations\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const fadeIn=keyframes`\n  from { opacity: 0; transform: translateY(-10px); }\n  to { opacity: 1; transform: translateY(0); }\n`;const slideIn=keyframes`\n  from { transform: translateY(20px); }\n  to { transform: translateY(0); }\n`;// Styled Components\nconst Badge=styled.div`\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: var(--danger);\n  color: white;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 11px;\n  font-weight: bold;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n`;const NotificationButton=styled.button`\n  position: relative;\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 10px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:active {\n    background: rgba(255, 255, 255, 0.2);\n  }\n`;const Dropdown=styled.div`\n  position: fixed;\n  top: ${Capacitor.isNativePlatform()?'60px':'calc(100% + 10px)'};\n  right: 10px;\n  width: ${Capacitor.isNativePlatform()?'calc(100% - 20px)':'380px'};\n  max-height: ${Capacitor.isNativePlatform()?'70vh':'500px'};\n  overflow: hidden;\n  background: var(--card-bg);\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  display: ${_ref=>{let{$isOpen}=_ref;return $isOpen?'block':'none';}};\n  z-index: 1001;\n  animation: ${fadeIn} 0.2s ease-out;\n  border: 1px solid var(--border-light);\n`;const Header=styled.div`\n  padding: 16px;\n  border-bottom: 1px solid var(--border-light);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  position: sticky;\n  top: 0;\n  background: var(--card-bg);\n  z-index: 1;\n`;const Actions=styled.div`\n  display: flex;\n  gap: 10px;\n`;const ActionButton=styled.button`\n  background: none;\n  border: none;\n  color: ${_ref2=>{let{$danger}=_ref2;return $danger?'var(--danger)':'var(--primary)';}};\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  padding: 6px 10px;\n  border-radius: 6px;\n  \n  &:active {\n    background: ${_ref3=>{let{$danger}=_ref3;return $danger?'rgba(255, 69, 0, 0.1)':'rgba(0, 123, 255, 0.1)';}};\n  }\n`;const NotificationList=styled.div`\n  max-height: calc(${Capacitor.isNativePlatform()?'70vh':'400px'} - 60px);\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n\n  &::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: var(--primary);\n    border-radius: 2px;\n  }\n`;const NotificationItem=styled.div`\n  padding: 16px;\n  border-bottom: 1px solid var(--border-light);\n  cursor: pointer;\n  display: flex;\n  gap: 12px;\n  position: relative;\n  background: ${_ref4=>{let{$unread}=_ref4;return $unread?'rgba(255, 69, 0, 0.05)':'transparent';}};\n  border-left: 3px solid\n    ${_ref5=>{let{$type}=_ref5;return $type==='like'?'var(--like-color)':$type==='comment'?'var(--comment-color)':$type==='reply'?'var(--reply-color)':'var(--primary)';}};\n  \n  &:active {\n    background: rgba(255, 69, 0, 0.1);\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;const Avatar=styled.img`\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--border-light);\n  flex-shrink: 0;\n`;const Content=styled.div`\n  flex: 1;\n  min-width: 0;\n`;const Text=styled.div`\n  font-size: 15px;\n  line-height: 1.4;\n`;const HighlightText=styled.span`\n  color: var(--primary);\n  font-weight: 500;\n`;const QuoteText=styled.div`\n  font-style: italic;\n  margin-top: 6px;\n  padding: 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  border-left: 2px solid var(--border-light);\n  color: var(--text-light);\n  font-size: 14px;\n`;const Time=styled.div`\n  font-size: 13px;\n  color: var(--text-lighter);\n  margin-top: 6px;\n`;const ReadIndicator=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  \n  svg {\n    color: var(--primary);\n    opacity: ${_ref6=>{let{$unread}=_ref6;return $unread?0:1;}};\n  }\n`;const EmptyState=styled.div`\n  padding: 32px 16px;\n  text-align: center;\n  color: var(--text-lighter);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n`;const ClearConfirmation=styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1002;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n  animation: ${fadeIn} 0.2s ease-out;\n`;const ConfirmationBox=styled.div`\n  background: var(--card-bg);\n  padding: 20px;\n  border-radius: 12px;\n  width: 100%;\n  max-width: 400px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  animation: ${slideIn} 0.3s ease-out;\n`;const ConfirmationText=styled.p`\n  margin-bottom: 20px;\n  text-align: center;\n  font-size: 16px;\n`;const ConfirmationButtons=styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n`;const ConfirmationButton=styled.button`\n  padding: 10px 20px;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 15px;\n  flex: 1;\n  \n  &:first-child {\n    background: var(--danger);\n    color: white;\n  }\n\n  &:last-child {\n    background: var(--border-light);\n    color: var(--text);\n  }\n`;const NotificationDropdown=()=>{const{notifications,unreadCount,markAsRead,clearAllNotifications,loading}=useNotifications();const[isOpen,setIsOpen]=useState(false);const[showClearConfirmation,setShowClearConfirmation]=useState(false);const dropdownRef=useRef(null);const navigate=useNavigate();// Handle click outside for mobile\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);document.addEventListener('touchstart',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);document.removeEventListener('touchstart',handleClickOutside);};},[]);// Status bar adjustments for mobile\nuseEffect(()=>{if(Capacitor.isNativePlatform()){if(isOpen){StatusBar.setBackgroundColor({color:'#1E1E1E'});StatusBar.setStyle({style:'dark'});}else{StatusBar.setBackgroundColor({color:'#00000000'});StatusBar.setStyle({style:'light'});}}},[isOpen]);// Mark as read when opened\nuseEffect(()=>{if(isOpen&&unreadCount>0){const unreadIds=notifications.filter(n=>!n.read).map(n=>n._id);if(unreadIds.length>0){markAsRead(unreadIds);}}},[isOpen,notifications,unreadCount,markAsRead]);const handleItemClick=notification=>{setIsOpen(false);if(notification.meme){navigate(`/memes/${notification.meme._id}`);}else if(notification.comment){navigate(`/memes/${notification.comment.meme}`,{state:{highlightComment:notification.comment._id}});}else if(notification.reply){navigate(`/memes/${notification.reply.meme}`,{state:{highlightReply:notification.reply._id}});}};const handleMarkAllRead=async()=>{const allUnreadIds=notifications.filter(n=>!n.read).map(n=>n._id);if(allUnreadIds.length>0){await markAsRead(allUnreadIds);}};const handleClearAll=async()=>{await clearAllNotifications();setShowClearConfirmation(false);setIsOpen(false);};const renderNotificationContent=notification=>{var _notification$sender,_notification$metadat,_notification$metadat2,_notification$sender2,_notification$meme,_notification$metadat3,_notification$meme2,_notification$sender3,_notification$comment,_notification$metadat4,_notification$meme3,_notification$sender4,_notification$metadat5,_notification$comment2;switch(notification.type){case'mention':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:(_notification$sender=notification.sender)===null||_notification$sender===void 0?void 0:_notification$sender.username}),\" te mencionou em um\",' ',((_notification$metadat=notification.metadata)===null||_notification$metadat===void 0?void 0:_notification$metadat.context)==='comment'?'comentário':'meme',((_notification$metadat2=notification.metadata)===null||_notification$metadat2===void 0?void 0:_notification$metadat2.text)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",notification.metadata.text.length>50?notification.metadata.text.substring(0,47)+'...':notification.metadata.text,\"\\\"\"]})]});case'like':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:((_notification$sender2=notification.sender)===null||_notification$sender2===void 0?void 0:_notification$sender2.username)||'Alguém'}),\" curtiu seu meme\",((_notification$meme=notification.meme)===null||_notification$meme===void 0?void 0:_notification$meme.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",notification.meme.caption.length>50?notification.meme.caption.substring(0,47)+'...':notification.meme.caption,\"\\\"\"]})]});case'like_grouped':return/*#__PURE__*/_jsxs(_Fragment,{children:[\"Seu meme tem \",/*#__PURE__*/_jsxs(HighlightText,{children:[((_notification$metadat3=notification.metadata)===null||_notification$metadat3===void 0?void 0:_notification$metadat3.count)||'muitas',\" curtidas\"]}),((_notification$meme2=notification.meme)===null||_notification$meme2===void 0?void 0:_notification$meme2.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",notification.meme.caption.length>50?notification.meme.caption.substring(0,47)+'...':notification.meme.caption,\"\\\"\"]})]});case'comment':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:((_notification$sender3=notification.sender)===null||_notification$sender3===void 0?void 0:_notification$sender3.username)||'Alguém'}),\" comentou no seu meme:\",(_notification$comment=notification.comment)!==null&&_notification$comment!==void 0&&_notification$comment.text?/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",notification.comment.text.length>60?notification.comment.text.substring(0,57)+'...':notification.comment.text,\"\\\"\"]}):/*#__PURE__*/_jsx(QuoteText,{children:\"Novo coment\\xE1rio\"})]});case'comment_grouped':return/*#__PURE__*/_jsxs(_Fragment,{children:[\"Seu meme tem \",/*#__PURE__*/_jsxs(HighlightText,{children:[((_notification$metadat4=notification.metadata)===null||_notification$metadat4===void 0?void 0:_notification$metadat4.count)||'muitos',\" coment\\xE1rios\"]}),((_notification$meme3=notification.meme)===null||_notification$meme3===void 0?void 0:_notification$meme3.caption)&&/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",notification.meme.caption.length>50?notification.meme.caption.substring(0,47)+'...':notification.meme.caption,\"\\\"\"]})]});case'reply':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HighlightText,{children:(_notification$sender4=notification.sender)===null||_notification$sender4===void 0?void 0:_notification$sender4.username}),\" respondeu seu coment\\xE1rio:\",/*#__PURE__*/_jsxs(QuoteText,{children:[\"\\\"\",(_notification$metadat5=notification.metadata)===null||_notification$metadat5===void 0?void 0:_notification$metadat5.text,\"\\\"\"]}),notification.comment&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4,fontSize:12},children:[\"Em resposta a: \\\"\",(_notification$comment2=notification.comment.text)===null||_notification$comment2===void 0?void 0:_notification$comment2.substring(0,40),\"...\\\"\"]})]});default:return'Nova notificação';}};return/*#__PURE__*/_jsxs(\"div\",{ref:dropdownRef,style:{position:'relative'},children:[/*#__PURE__*/_jsxs(NotificationButton,{onClick:()=>setIsOpen(!isOpen),\"aria-label\":\"Notifica\\xE7\\xF5es\",children:[/*#__PURE__*/_jsx(FiBell,{size:24}),unreadCount>0&&/*#__PURE__*/_jsx(Badge,{\"aria-hidden\":\"true\",children:unreadCount>9?'9+':unreadCount})]}),/*#__PURE__*/_jsxs(Dropdown,{$isOpen:isOpen,children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Notifica\\xE7\\xF5es\"}),/*#__PURE__*/_jsxs(Actions,{children:[notifications.length>0&&/*#__PURE__*/_jsxs(ActionButton,{$danger:true,onClick:()=>setShowClearConfirmation(true),\"aria-label\":\"Limpar notifica\\xE7\\xF5es\",children:[/*#__PURE__*/_jsx(FiTrash2,{size:16}),\" Limpar\"]}),notifications.some(n=>!n.read)&&/*#__PURE__*/_jsxs(ActionButton,{onClick:handleMarkAllRead,\"aria-label\":\"Marcar todas como lidas\",children:[/*#__PURE__*/_jsx(FiCheck,{size:16}),\" Lidas\"]})]})]}),/*#__PURE__*/_jsx(NotificationList,{children:loading?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(FiBell,{size:24}),\"Carregando notifica\\xE7\\xF5es...\"]}):notifications.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(FiBell,{size:24}),\"Nenhuma notifica\\xE7\\xE3o\"]}):notifications.map(notification=>{var _notification$sender5,_notification$sender6,_notification$sender7;return/*#__PURE__*/_jsxs(NotificationItem,{$unread:!notification.read,$type:notification.type,onClick:()=>handleItemClick(notification),\"aria-label\":`Notificação de ${notification.type}`,children:[/*#__PURE__*/_jsx(Avatar,{src:(_notification$sender5=notification.sender)!==null&&_notification$sender5!==void 0&&(_notification$sender6=_notification$sender5.profile)!==null&&_notification$sender6!==void 0&&_notification$sender6.avatar?notification.sender.profile.avatar.startsWith('https')?notification.sender.profile.avatar:`${process.env.REACT_APP_API_URL||'https://api.jokesteronline.org'}${notification.sender.profile.avatar}`:'https://i.pravatar.cc/150?img=3',alt:(_notification$sender7=notification.sender)===null||_notification$sender7===void 0?void 0:_notification$sender7.username,crossOrigin:\"anonymous\",onError:e=>{e.target.src='https://i.pravatar.cc/150?img=3';e.target.onerror=null;}}),/*#__PURE__*/_jsxs(Content,{children:[/*#__PURE__*/_jsx(Text,{children:renderNotificationContent(notification)}),/*#__PURE__*/_jsx(Time,{children:formatDistanceToNow(new Date(notification.createdAt),{addSuffix:true,locale:ptBR})})]}),/*#__PURE__*/_jsx(ReadIndicator,{$unread:!notification.read,children:/*#__PURE__*/_jsx(FiCheck,{size:18})})]},notification._id);})})]}),showClearConfirmation&&/*#__PURE__*/_jsx(ClearConfirmation,{children:/*#__PURE__*/_jsxs(ConfirmationBox,{children:[/*#__PURE__*/_jsxs(ConfirmationText,{children:[\"Tem certeza que deseja limpar todas as notifica\\xE7\\xF5es?\",/*#__PURE__*/_jsx(\"br\",{}),\"Esta a\\xE7\\xE3o n\\xE3o pode ser desfeita.\"]}),/*#__PURE__*/_jsxs(ConfirmationButtons,{children:[/*#__PURE__*/_jsx(ConfirmationButton,{onClick:handleClearAll,\"aria-label\":\"Confirmar limpar notifica\\xE7\\xF5es\",children:\"Limpar\"}),/*#__PURE__*/_jsx(ConfirmationButton,{onClick:()=>setShowClearConfirmation(false),\"aria-label\":\"Cancelar\",children:\"Cancelar\"})]})]})})]});};export default NotificationDropdown;","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","keyframes","useNotifications","FiBell","FiCheck","FiTrash2","formatDistanceToNow","ptBR","useNavigate","StatusBar","Capacitor","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","fadeIn","slideIn","Badge","div","NotificationButton","button","Dropdown","isNativePlatform","_ref","$isOpen","Header","Actions","ActionButton","_ref2","$danger","_ref3","NotificationList","NotificationItem","_ref4","$unread","_ref5","$type","Avatar","img","Content","Text","HighlightText","span","QuoteText","Time","ReadIndicator","_ref6","EmptyState","ClearConfirmation","ConfirmationBox","ConfirmationText","p","ConfirmationButtons","ConfirmationButton","NotificationDropdown","notifications","unreadCount","markAsRead","clearAllNotifications","loading","isOpen","setIsOpen","showClearConfirmation","setShowClearConfirmation","dropdownRef","navigate","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","setBackgroundColor","color","setStyle","style","unreadIds","filter","n","read","map","_id","length","handleItemClick","notification","meme","comment","state","highlightComment","reply","highlightReply","handleMarkAllRead","allUnreadIds","handleClearAll","renderNotificationContent","_notification$sender","_notification$metadat","_notification$metadat2","_notification$sender2","_notification$meme","_notification$metadat3","_notification$meme2","_notification$sender3","_notification$comment","_notification$metadat4","_notification$meme3","_notification$sender4","_notification$metadat5","_notification$comment2","type","children","sender","username","metadata","context","text","substring","caption","count","marginTop","fontSize","ref","position","onClick","size","some","_notification$sender5","_notification$sender6","_notification$sender7","src","profile","avatar","startsWith","process","env","REACT_APP_API_URL","alt","crossOrigin","onError","e","onerror","Date","createdAt","addSuffix","locale"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/jokersta_apk/src/components/NotificationDropdown/NotificationDropdown.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport styled, { keyframes } from 'styled-components';\r\nimport { useNotifications } from '../../contexts/NotificationContext';\r\nimport { FiBell, FiCheck, FiTrash2 } from 'react-icons/fi';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale/pt-BR';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { StatusBar } from '@capacitor/status-bar';\r\nimport { Capacitor } from '@capacitor/core';\r\n\r\n// Animations\r\nconst fadeIn = keyframes`\r\n  from { opacity: 0; transform: translateY(-10px); }\r\n  to { opacity: 1; transform: translateY(0); }\r\n`;\r\n\r\nconst slideIn = keyframes`\r\n  from { transform: translateY(20px); }\r\n  to { transform: translateY(0); }\r\n`;\r\n\r\n// Styled Components\r\nconst Badge = styled.div`\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background: var(--danger);\r\n  color: white;\r\n  border-radius: 50%;\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 11px;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst NotificationButton = styled.button`\r\n  position: relative;\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: 10px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  &:active {\r\n    background: rgba(255, 255, 255, 0.2);\r\n  }\r\n`;\r\n\r\nconst Dropdown = styled.div`\r\n  position: fixed;\r\n  top: ${Capacitor.isNativePlatform() ? '60px' : 'calc(100% + 10px)'};\r\n  right: 10px;\r\n  width: ${Capacitor.isNativePlatform() ? 'calc(100% - 20px)' : '380px'};\r\n  max-height: ${Capacitor.isNativePlatform() ? '70vh' : '500px'};\r\n  overflow: hidden;\r\n  background: var(--card-bg);\r\n  border-radius: 12px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  display: ${({ $isOpen }) => ($isOpen ? 'block' : 'none')};\r\n  z-index: 1001;\r\n  animation: ${fadeIn} 0.2s ease-out;\r\n  border: 1px solid var(--border-light);\r\n`;\r\n\r\nconst Header = styled.div`\r\n  padding: 16px;\r\n  border-bottom: 1px solid var(--border-light);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  position: sticky;\r\n  top: 0;\r\n  background: var(--card-bg);\r\n  z-index: 1;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: ${({ $danger }) => ($danger ? 'var(--danger)' : 'var(--primary)')};\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  padding: 6px 10px;\r\n  border-radius: 6px;\r\n  \r\n  &:active {\r\n    background: ${({ $danger }) => ($danger ? 'rgba(255, 69, 0, 0.1)' : 'rgba(0, 123, 255, 0.1)')};\r\n  }\r\n`;\r\n\r\nconst NotificationList = styled.div`\r\n  max-height: calc(${Capacitor.isNativePlatform() ? '70vh' : '400px'} - 60px);\r\n  overflow-y: auto;\r\n  -webkit-overflow-scrolling: touch;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 4px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background-color: var(--primary);\r\n    border-radius: 2px;\r\n  }\r\n`;\r\n\r\nconst NotificationItem = styled.div`\r\n  padding: 16px;\r\n  border-bottom: 1px solid var(--border-light);\r\n  cursor: pointer;\r\n  display: flex;\r\n  gap: 12px;\r\n  position: relative;\r\n  background: ${({ $unread }) => ($unread ? 'rgba(255, 69, 0, 0.05)' : 'transparent')};\r\n  border-left: 3px solid\r\n    ${({ $type }) => \r\n      $type === 'like' ? 'var(--like-color)' :\r\n      $type === 'comment' ? 'var(--comment-color)' :\r\n      $type === 'reply' ? 'var(--reply-color)' :\r\n      'var(--primary)'};\r\n  \r\n  &:active {\r\n    background: rgba(255, 69, 0, 0.1);\r\n  }\r\n\r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  border: 2px solid var(--border-light);\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  font-size: 15px;\r\n  line-height: 1.4;\r\n`;\r\n\r\nconst HighlightText = styled.span`\r\n  color: var(--primary);\r\n  font-weight: 500;\r\n`;\r\n\r\nconst QuoteText = styled.div`\r\n  font-style: italic;\r\n  margin-top: 6px;\r\n  padding: 8px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 6px;\r\n  border-left: 2px solid var(--border-light);\r\n  color: var(--text-light);\r\n  font-size: 14px;\r\n`;\r\n\r\nconst Time = styled.div`\r\n  font-size: 13px;\r\n  color: var(--text-lighter);\r\n  margin-top: 6px;\r\n`;\r\n\r\nconst ReadIndicator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 24px;\r\n  \r\n  svg {\r\n    color: var(--primary);\r\n    opacity: ${({ $unread }) => ($unread ? 0 : 1)};\r\n  }\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  padding: 32px 16px;\r\n  text-align: center;\r\n  color: var(--text-lighter);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ClearConfirmation = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 1002;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n  animation: ${fadeIn} 0.2s ease-out;\r\n`;\r\n\r\nconst ConfirmationBox = styled.div`\r\n  background: var(--card-bg);\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  width: 100%;\r\n  max-width: 400px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\r\n  animation: ${slideIn} 0.3s ease-out;\r\n`;\r\n\r\nconst ConfirmationText = styled.p`\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n`;\r\n\r\nconst ConfirmationButtons = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ConfirmationButton = styled.button`\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  flex: 1;\r\n  \r\n  &:first-child {\r\n    background: var(--danger);\r\n    color: white;\r\n  }\r\n\r\n  &:last-child {\r\n    background: var(--border-light);\r\n    color: var(--text);\r\n  }\r\n`;\r\n\r\nconst NotificationDropdown = () => {\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    markAsRead,\r\n    clearAllNotifications,\r\n    loading\r\n  } = useNotifications();\r\n  \r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [showClearConfirmation, setShowClearConfirmation] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Handle click outside for mobile\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('touchstart', handleClickOutside);\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('touchstart', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // Status bar adjustments for mobile\r\n  useEffect(() => {\r\n    if (Capacitor.isNativePlatform()) {\r\n      if (isOpen) {\r\n        StatusBar.setBackgroundColor({ color: '#1E1E1E' });\r\n        StatusBar.setStyle({ style: 'dark' });\r\n      } else {\r\n        StatusBar.setBackgroundColor({ color: '#00000000' });\r\n        StatusBar.setStyle({ style: 'light' });\r\n      }\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Mark as read when opened\r\n  useEffect(() => {\r\n    if (isOpen && unreadCount > 0) {\r\n      const unreadIds = notifications\r\n        .filter(n => !n.read)\r\n        .map(n => n._id);\r\n      \r\n      if (unreadIds.length > 0) {\r\n        markAsRead(unreadIds);\r\n      }\r\n    }\r\n  }, [isOpen, notifications, unreadCount, markAsRead]);\r\n\r\n  const handleItemClick = (notification) => {\r\n    setIsOpen(false);\r\n    \r\n    if (notification.meme) {\r\n      navigate(`/memes/${notification.meme._id}`);\r\n    } else if (notification.comment) {\r\n      navigate(`/memes/${notification.comment.meme}`, { \r\n        state: { highlightComment: notification.comment._id } \r\n      });\r\n    } else if (notification.reply) {\r\n      navigate(`/memes/${notification.reply.meme}`, { \r\n        state: { highlightReply: notification.reply._id } \r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMarkAllRead = async () => {\r\n    const allUnreadIds = notifications\r\n      .filter(n => !n.read)\r\n      .map(n => n._id);\r\n    \r\n    if (allUnreadIds.length > 0) {\r\n      await markAsRead(allUnreadIds);\r\n    }\r\n  };\r\n\r\n  const handleClearAll = async () => {\r\n    await clearAllNotifications();\r\n    setShowClearConfirmation(false);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const renderNotificationContent = (notification) => {\r\n    switch(notification.type) {\r\n      case 'mention':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username}</HighlightText> te mencionou em um{' '}\r\n            {notification.metadata?.context === 'comment' ? 'comentário' : 'meme'}\r\n            {notification.metadata?.text && (\r\n              <QuoteText>\r\n                \"{notification.metadata.text.length > 50 \r\n                  ? notification.metadata.text.substring(0, 47) + '...' \r\n                  : notification.metadata.text}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      case 'like':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username || 'Alguém'}</HighlightText> curtiu seu meme\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{notification.meme.caption.length > 50 \r\n                  ? notification.meme.caption.substring(0, 47) + '...' \r\n                  : notification.meme.caption}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n      \r\n      case 'like_grouped':\r\n        return (\r\n          <>\r\n            Seu meme tem <HighlightText>{notification.metadata?.count || 'muitas'} curtidas</HighlightText>\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{notification.meme.caption.length > 50 \r\n                  ? notification.meme.caption.substring(0, 47) + '...' \r\n                  : notification.meme.caption}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      case 'comment':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username || 'Alguém'}</HighlightText> comentou no seu meme: \r\n            {notification.comment?.text ? (\r\n              <QuoteText>\r\n                \"{notification.comment.text.length > 60 \r\n                  ? notification.comment.text.substring(0, 57) + '...' \r\n                  : notification.comment.text}\"\r\n              </QuoteText>\r\n            ) : (\r\n              <QuoteText>Novo comentário</QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      case 'comment_grouped':\r\n        return (\r\n          <>\r\n            Seu meme tem <HighlightText>{notification.metadata?.count || 'muitos'} comentários</HighlightText>\r\n            {notification.meme?.caption && (\r\n              <QuoteText>\r\n                \"{notification.meme.caption.length > 50 \r\n                  ? notification.meme.caption.substring(0, 47) + '...' \r\n                  : notification.meme.caption}\"\r\n              </QuoteText>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      case 'reply':\r\n        return (\r\n          <>\r\n            <HighlightText>{notification.sender?.username}</HighlightText> respondeu seu comentário:\r\n            <QuoteText>\r\n              \"{notification.metadata?.text}\"\r\n            </QuoteText>\r\n            {notification.comment && (\r\n              <div style={{ marginTop: 4, fontSize: 12 }}>\r\n                Em resposta a: \"{notification.comment.text?.substring(0, 40)}...\"\r\n              </div>\r\n            )}\r\n          </>\r\n        );\r\n\r\n      default:\r\n        return 'Nova notificação';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} style={{ position: 'relative' }}>\r\n      <NotificationButton \r\n        onClick={() => setIsOpen(!isOpen)}\r\n        aria-label=\"Notificações\"\r\n      >\r\n        <FiBell size={24} />\r\n        {unreadCount > 0 && (\r\n          <Badge aria-hidden=\"true\">\r\n            {unreadCount > 9 ? '9+' : unreadCount}\r\n          </Badge>\r\n        )}\r\n      </NotificationButton>\r\n      \r\n      <Dropdown $isOpen={isOpen}>\r\n        <Header>\r\n          <span>Notificações</span>\r\n          <Actions>\r\n            {notifications.length > 0 && (\r\n              <ActionButton \r\n                $danger \r\n                onClick={() => setShowClearConfirmation(true)}\r\n                aria-label=\"Limpar notificações\"\r\n              >\r\n                <FiTrash2 size={16} /> Limpar\r\n              </ActionButton>\r\n            )}\r\n            {notifications.some(n => !n.read) && (\r\n              <ActionButton \r\n                onClick={handleMarkAllRead}\r\n                aria-label=\"Marcar todas como lidas\"\r\n              >\r\n                <FiCheck size={16} /> Lidas\r\n              </ActionButton>\r\n            )}\r\n          </Actions>\r\n        </Header>\r\n        \r\n        <NotificationList>\r\n          {loading ? (\r\n            <EmptyState>\r\n              <FiBell size={24} />\r\n              Carregando notificações...\r\n            </EmptyState>\r\n          ) : notifications.length === 0 ? (\r\n            <EmptyState>\r\n              <FiBell size={24} />\r\n              Nenhuma notificação\r\n            </EmptyState>\r\n          ) : (\r\n            notifications.map(notification => (\r\n              <NotificationItem\r\n                key={notification._id}\r\n                $unread={!notification.read}\r\n                $type={notification.type}\r\n                onClick={() => handleItemClick(notification)}\r\n                aria-label={`Notificação de ${notification.type}`}\r\n              >\r\n                <Avatar\r\n                  src={\r\n                    notification.sender?.profile?.avatar\r\n                      ? notification.sender.profile.avatar.startsWith('https')\r\n                        ? notification.sender.profile.avatar\r\n                        : `${process.env.REACT_APP_API_URL || 'https://api.jokesteronline.org'}${notification.sender.profile.avatar}`\r\n                      : 'https://i.pravatar.cc/150?img=3'\r\n                  }\r\n                  alt={notification.sender?.username}\r\n                  crossOrigin=\"anonymous\"\r\n                  onError={(e) => {\r\n                    e.target.src = 'https://i.pravatar.cc/150?img=3';\r\n                    e.target.onerror = null;\r\n                  }}\r\n                />\r\n                \r\n                <Content>\r\n                  <Text>\r\n                    {renderNotificationContent(notification)}\r\n                  </Text>\r\n                  <Time>\r\n                    {formatDistanceToNow(new Date(notification.createdAt), {\r\n                      addSuffix: true,\r\n                      locale: ptBR\r\n                    })}\r\n                  </Time>\r\n                </Content>\r\n                \r\n                <ReadIndicator $unread={!notification.read}>\r\n                  <FiCheck size={18} />\r\n                </ReadIndicator>\r\n              </NotificationItem>\r\n            ))\r\n          )}\r\n        </NotificationList>\r\n      </Dropdown>\r\n\r\n      {showClearConfirmation && (\r\n        <ClearConfirmation>\r\n          <ConfirmationBox>\r\n            <ConfirmationText>\r\n              Tem certeza que deseja limpar todas as notificações?\r\n              <br />\r\n              Esta ação não pode ser desfeita.\r\n            </ConfirmationText>\r\n            <ConfirmationButtons>\r\n              <ConfirmationButton \r\n                onClick={handleClearAll}\r\n                aria-label=\"Confirmar limpar notificações\"\r\n              >\r\n                Limpar\r\n              </ConfirmationButton>\r\n              <ConfirmationButton \r\n                onClick={() => setShowClearConfirmation(false)}\r\n                aria-label=\"Cancelar\"\r\n              >\r\n                Cancelar\r\n              </ConfirmationButton>\r\n            </ConfirmationButtons>\r\n          </ConfirmationBox>\r\n        </ClearConfirmation>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationDropdown;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}