{"ast":null,"code":"import api from'./api';export const register=async userData=>{try{const{data}=await api.post('/auth/register',userData);return data;}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('[register] Erro:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===409){throw{type:'CONFLICT',message:error.response.data.message,conflicts:error.response.data.conflicts};}throw{type:'UNKNOWN_ERROR',message:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Erro ao registrar usuário'};}};export const login=async credentials=>{try{const{data}=await api.post('/auth/login',credentials);return data;}catch(error){var _error$response3,_error$response4,_error$response4$data;console.error('[login] Erro:',error);if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===401){throw{type:'AUTH_ERROR',message:'Credenciais inválidas'};}throw{type:'UNKNOWN_ERROR',message:((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Erro ao fazer login'};}};export const checkAuth=async()=>{try{const token=localStorage.getItem('token');if(!token)throw new Error('No token found');const{data}=await api.get('/auth/check',{headers:{Authorization:`Bearer ${token}`}});return data;}catch(error){var _error$response5,_error$response6,_error$response6$data;console.error('[checkAuth] Erro:',error);if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===401){localStorage.removeItem('token');throw{type:'AUTH_ERROR',message:'Sessão expirada'};}throw{type:'UNKNOWN_ERROR',message:((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Erro ao verificar autenticação'};}};export const logout=async()=>{try{localStorage.removeItem('token');return{success:true};}catch(error){console.error('[logout] Erro:',error);throw{type:'UNKNOWN_ERROR',message:'Erro ao fazer logout'};}};","map":{"version":3,"names":["api","register","userData","data","post","error","_error$response","_error$response2","_error$response2$data","console","response","status","type","message","conflicts","login","credentials","_error$response3","_error$response4","_error$response4$data","checkAuth","token","localStorage","getItem","Error","get","headers","Authorization","_error$response5","_error$response6","_error$response6$data","removeItem","logout","success"],"sources":["C:/Users/drrod/OneDrive/Área de Trabalho/ifunny2/client/src/services/auth.js"],"sourcesContent":["import api from './api';\n\nexport const register = async (userData) => {\n  try {\n    const { data } = await api.post('/auth/register', userData);\n    return data;\n  } catch (error) {\n    console.error('[register] Erro:', error);\n    if (error.response?.status === 409) {\n      throw { \n        type: 'CONFLICT',\n        message: error.response.data.message,\n        conflicts: error.response.data.conflicts\n      };\n    }\n    throw {\n      type: 'UNKNOWN_ERROR',\n      message: error.response?.data?.message || 'Erro ao registrar usuário'\n    };\n  }\n};\n\nexport const login = async (credentials) => {\n  try {\n    const { data } = await api.post('/auth/login', credentials);\n    return data;\n  } catch (error) {\n    console.error('[login] Erro:', error);\n    if (error.response?.status === 401) {\n      throw { type: 'AUTH_ERROR', message: 'Credenciais inválidas' };\n    }\n    throw { \n      type: 'UNKNOWN_ERROR', \n      message: error.response?.data?.message || 'Erro ao fazer login' \n    };\n  }\n};\n\nexport const checkAuth = async () => {\n  try {\n    const token = localStorage.getItem('token');\n    if (!token) throw new Error('No token found');\n    \n    const { data } = await api.get('/auth/check', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return data;\n  } catch (error) {\n    console.error('[checkAuth] Erro:', error);\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      throw { type: 'AUTH_ERROR', message: 'Sessão expirada' };\n    }\n    throw { \n      type: 'UNKNOWN_ERROR', \n      message: error.response?.data?.message || 'Erro ao verificar autenticação' \n    };\n  }\n};\n\nexport const logout = async () => {\n  try {\n    localStorage.removeItem('token');\n    return { success: true };\n  } catch (error) {\n    console.error('[logout] Erro:', error);\n    throw { type: 'UNKNOWN_ERROR', message: 'Erro ao fazer logout' };\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}